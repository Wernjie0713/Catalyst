import{r as g,j as e}from"./index-D3Bj6weo.js";import{m as N,L as k}from"./index.esm-CYkcvaz4.js";import"./index-CfYVbadh.js";import{A as C}from"./AuthenticatedLayout-C2ejazUz.js";import{m as n}from"./proxy-CrpZcEeN.js";import{A as I}from"./index-Dh0BU1j3.js";function _({user:l}){const[t,s]=g.useState(null),[r,i]=g.useState(""),[d,m]=g.useState(!1),{setData:u,post:h,processing:x,errors:f,reset:p}=N({photo:null,profile_type:c(l)});g.useEffect(()=>{if(r||f.photo){const a=setTimeout(()=>{i(""),p("photo")},5e3);return()=>clearTimeout(a)}},[r,f.photo]);function c(a){return a.department_staff?"department_staff":a.student?"student":a.lecturer?"lecturer":a.university?"university":a.organizer?"organizer":null}const b=a=>{const o=a.target.files[0];if(i(""),o&&o.size>2*1024*1024){i("Image size must be less than 2MB"),a.target.value="";return}if(o&&!["image/jpeg","image/png","image/jpg","image/gif"].includes(o.type)){i("Please upload a valid image file (JPEG, PNG, JPG, GIF)"),a.target.value="";return}if(o){u("photo",o);const j=new FileReader;j.onloadend=()=>{s(j.result)},j.readAsDataURL(o)}},v=a=>{a.preventDefault(),h(route("profile.photo"),{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{window.location.reload()},onError:o=>{console.error("Upload failed:",o),i(o.photo||"Failed to upload photo. Please try again."),s(null),p("photo")}})},y=(()=>{if(t)return t;const a=l[c(l)];return a!=null&&a.profile_photo_path?`/${a.profile_photo_path}`:null})();return e.jsx("div",{className:"relative flex flex-col items-center w-32",children:e.jsxs("form",{onSubmit:v,encType:"multipart/form-data",className:"flex flex-col items-center relative",children:[e.jsxs("div",{className:"w-32 relative",onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[e.jsxs("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-gray-100 relative shadow-lg",children:[y?e.jsx("img",{src:y,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx("span",{className:"material-symbols-outlined text-4xl",children:"person"})}),e.jsx("div",{className:`absolute inset-0 bg-black/60 flex items-center justify-center transition-all duration-300 ease-in-out cursor-pointer
                                ${d?"opacity-100":"opacity-0"}`,onClick:()=>document.getElementById("photo").click(),children:e.jsx("div",{className:"transform transition-transform duration-300 ease-in-out hover:scale-110",children:e.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"photo_camera"})})})]}),e.jsx("input",{type:"file",id:"photo",onChange:b,className:"hidden",accept:"image/jpeg,image/png,image/jpg,image/gif"})]}),(r||f.photo)&&e.jsx("div",{className:"ml-50",children:e.jsxs("div",{className:"bg-red-500/90 text-white px-4 py-2 rounded-full shadow-lg flex items-center gap-2 whitespace-nowrap mt-2",children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"error"}),e.jsx("span",{className:"text-sm font-medium",children:r||f.photo})]})}),t&&e.jsx("div",{className:"mt-4",children:e.jsx("button",{type:"submit",disabled:x,className:"group relative inline-flex items-center justify-center overflow-hidden rounded-full bg-gradient-to-br from-blue-500 to-blue-600 p-0.5 text-sm font-medium text-white hover:from-blue-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:e.jsx("span",{className:"relative flex items-center gap-1.5 rounded-full bg-blue-500 px-3 py-1.5 transition-all duration-200 ease-in group-hover:bg-opacity-0",children:x?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"save"}),e.jsx("span",{children:"Save"})]})})})})]})})}function P({user:l,children:t,activeTab:s,onTabChange:r,components:i}){const d=!(i!=null&&i.Teams)&&!(i!=null&&i.Certificates)&&!(i!=null&&i.Badges),m=[{name:"Profiles",key:"profiles",icon:"person"},(i==null?void 0:i.Teams)&&{name:"Teams",key:"teams",icon:"groups"},(i==null?void 0:i.Certificates)&&{name:"Certificates",key:"certificates",icon:"workspace_premium"},(i==null?void 0:i.Badges)&&{name:"Badges",key:"badges",icon:"emoji_events"}].filter(Boolean),u={initial:{opacity:0},animate:{opacity:1,transition:{duration:.6,when:"beforeChildren",staggerChildren:.15}}},h={initial:{opacity:0,y:-30,scale:.95},animate:{opacity:1,y:0,scale:1,transition:{duration:.7,ease:"easeOut",type:"spring",stiffness:100}}},x={initial:{opacity:0,y:30,scale:.98},animate:{opacity:1,y:0,scale:1,transition:{delay:.3,duration:.6,ease:"easeOut",type:"spring",stiffness:80}}},f={inactive:{opacity:.8,scale:1,y:0},active:{opacity:1,scale:1.05,y:-2,transition:{duration:.4,type:"spring",stiffness:300}},hover:{opacity:1,scale:1.08,y:-3,transition:{duration:.2,type:"spring",stiffness:400}},tap:{scale:.95,y:0,transition:{duration:.1,type:"spring",stiffness:500}}},p={initial:{rotate:0,scale:1},animate:{rotate:[0,10,-10,0],scale:[1,1.1,1],transition:{duration:.6,ease:"easeInOut"}},hover:{rotate:[0,15,-15,0],scale:1.2,transition:{duration:.3,ease:"easeInOut"}}},c={initial:{opacity:.3},animate:{opacity:[.3,.7,.3],transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}}},[b,v]=g.useState(!1),w=a=>{a!==s&&(v(!0),r(a),setTimeout(()=>{v(!1)},100))},y=()=>e.jsxs("div",{className:"space-y-6 animate-pulse",children:[e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-white rounded-xl p-6 border border-orange-100",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(n.div,{className:"w-24 h-24 bg-orange-200 rounded-full",variants:c,initial:"initial",animate:"animate"}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx(n.div,{className:"h-8 bg-orange-200 rounded-lg w-3/4",variants:c,initial:"initial",animate:"animate"}),e.jsx(n.div,{className:"h-4 bg-orange-200 rounded w-1/2",variants:c,initial:"initial",animate:"animate"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[1,2,3,4].map(a=>e.jsx(n.div,{className:"h-6 bg-orange-200 rounded w-full",variants:c,initial:"initial",animate:"animate"},a))})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(a=>e.jsx(n.div,{className:"bg-gradient-to-br from-orange-50 to-white rounded-xl p-6 border border-orange-100",variants:c,initial:"initial",animate:"animate",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(n.div,{className:"h-6 bg-orange-200 rounded w-3/4",variants:c,initial:"initial",animate:"animate"}),[1,2,3].map(o=>e.jsxs(n.div,{className:"space-y-2",variants:c,initial:"initial",animate:"animate",children:[e.jsx("div",{className:"h-3 bg-orange-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-orange-200 rounded w-full"})]},o))]})},a))})]});return e.jsxs(C,{user:l,children:[e.jsx(k,{title:"Profile"}),e.jsx(n.div,{className:"min-h-screen bg-gradient-to-br from-white via-orange-50/30 to-white",initial:"initial",animate:"animate",variants:u,children:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"relative max-w-7xl mx-auto px-2 sm:px-6 lg:px-8 py-4 sm:py-6",children:[!d&&e.jsx(n.div,{className:"flex justify-center mb-6 sm:mb-8 overflow-x-auto",variants:h,children:e.jsxs("div",{className:"relative bg-white/95 backdrop-blur-md rounded-2xl p-2 shadow-2xl border border-orange-200/50 w-full max-w-[95vw] sm:max-w-fit overflow-hidden",children:[e.jsx(n.div,{className:"absolute inset-0 bg-gradient-to-r from-orange-50/50 via-white to-orange-50/50",animate:{background:["linear-gradient(90deg, rgba(254, 215, 170, 0.3) 0%, rgba(255, 255, 255, 1) 50%, rgba(254, 215, 170, 0.3) 100%)","linear-gradient(90deg, rgba(254, 215, 170, 0.1) 0%, rgba(255, 255, 255, 1) 50%, rgba(254, 215, 170, 0.1) 100%)","linear-gradient(90deg, rgba(254, 215, 170, 0.3) 0%, rgba(255, 255, 255, 1) 50%, rgba(254, 215, 170, 0.3) 100%)"]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),e.jsx("nav",{className:"relative flex gap-2 min-w-full sm:min-w-0",children:m.map((a,o)=>e.jsxs(n.button,{onClick:()=>w(a.key),className:`
                                                    relative flex items-center gap-2 flex-1 sm:flex-none px-4 sm:px-6 py-3 rounded-xl text-sm font-semibold
                                                    whitespace-nowrap transition-all duration-300 overflow-hidden
                                                    ${s===a.key?"text-white shadow-lg":"text-gray-600 hover:text-orange-600"}
                                                `,variants:f,initial:"inactive",animate:s===a.key?"active":"inactive",whileHover:"hover",whileTap:"tap",custom:o,children:[s===a.key&&e.jsx(n.div,{className:"absolute inset-0 bg-gradient-to-r from-orange-500 via-orange-600 to-orange-500 rounded-xl",layoutId:"activeTabBackground",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4}}),s!==a.key&&e.jsx(n.div,{className:"absolute inset-0 bg-gradient-to-r from-orange-100/50 to-orange-200/50 rounded-xl",initial:{opacity:0,scale:.8},whileHover:{opacity:1,scale:1},transition:{duration:.2}}),e.jsx(n.span,{className:"relative z-10 material-symbols-outlined text-lg",variants:p,initial:"initial",animate:s===a.key?"animate":"initial",whileHover:"hover",children:a.icon}),e.jsx("span",{className:"relative z-10",children:a.name}),s===a.key&&e.jsx(n.div,{className:"absolute inset-0 rounded-xl ring-2 ring-orange-300/50 ring-offset-2 ring-offset-white",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.4}})]},a.key))})]})}),e.jsx("div",{className:`${d?"mt-0":"mt-6 sm:mb-8"}`,children:e.jsx(n.div,{className:"bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl border border-orange-200/50 overflow-hidden",variants:x,layout:!0,children:e.jsx(I,{mode:"wait",children:b?e.jsx(n.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"p-4 sm:p-6",children:e.jsx(y,{})},"loading"):e.jsx(n.div,{initial:{opacity:0,y:20,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.98},transition:{duration:.3,ease:"easeInOut",type:"spring",stiffness:100},className:"relative p-4 sm:p-6",children:t},s)})})})]})})})]})}function B({activeTab:l,components:t,user:s}){return(()=>{switch(l){case"profiles":return t.PersonalInformation?e.jsx(t.PersonalInformation,{user:s}):null;case"teams":return t.Teams?e.jsx(t.Teams,{user:s}):null;case"certificates":return t.Certificates?e.jsx(t.Certificates,{user:s}):null;case"badges":return t.Badges?e.jsx(t.Badges,{user:s}):null;default:return t.PersonalInformation?e.jsx(t.PersonalInformation,{user:s}):null}})()}function A({auth:l,components:t,profileUser:s,roles:r,showFriendButton:i,friendStatus:d,friendRequestId:m}){const[u,h]=g.useState("profiles"),x={initial:{opacity:0,y:10},animate:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}},exit:{opacity:0,y:-10,transition:{duration:.2}}};return e.jsx(P,{user:l.user,activeTab:u,onTabChange:h,components:t,showFriendButton:i,friendStatus:d,friendRequestId:m,profileUser:s,children:e.jsx(n.div,{initial:"initial",animate:"animate",exit:"exit",variants:x,children:e.jsx(B,{activeTab:u,components:t,user:s??l.user})},u)})}function E({type:l="text",className:t="",options:s=[],...r}){const i="w-full px-4 py-2.5 bg-white border border-orange-200 rounded-xl text-gray-800 placeholder-gray-500 focus:border-orange-500 focus:ring-1 focus:ring-orange-500 transition-colors duration-200";return l==="select"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r.label}),e.jsxs("select",{...r,className:`${i} ${t}
                        appearance-none bg-white
                        background-image: url("data:image/svg+xml,...") // Add a custom dropdown arrow
                    `,children:[e.jsxs("option",{value:"",disabled:!0,children:["Select ",r.label]}),s.map(d=>e.jsx("option",{value:d,className:"bg-white text-gray-800",children:d},d))]}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:r.error})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r.label}),e.jsx("input",{type:l,...r,className:`${i} ${t}`}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:r.error})]})}function M({userId:l,friendStatus:t,friendRequestId:s}){const{post:r,processing:i}=N(),[d,m]=g.useState(t);g.useEffect(()=>{m(t)},[t]);const u=()=>{r(route("friend.request",l),{},{onSuccess:()=>{m("pending")}})};return d==="accepted"?e.jsxs("button",{className:"inline-flex items-center px-4 py-2 bg-green-500 text-white rounded-xl text-sm font-medium shadow-sm",disabled:!0,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Friends"]}):d==="pending"?e.jsxs("button",{className:"inline-flex items-center px-4 py-2 bg-gray-500 text-white rounded-xl text-sm font-medium cursor-not-allowed shadow-sm",disabled:!0,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),"Request Pending"]}):e.jsxs("button",{onClick:u,disabled:i,className:"inline-flex items-center px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-xl text-sm font-medium transition-colors shadow-sm",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"})}),"Add Friend"]})}export{A as B,M as F,E as I,_ as U};
