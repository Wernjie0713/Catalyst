import{r as n,j as t}from"./index-D3Bj6weo.js";import{T as X,E as k}from"./EventModal-Dkw4NVLG.js";import{K as D}from"./index.esm-CYkcvaz4.js";import{u as N,a as L,M as E,i as _,n as T,f as A,b as I,c as U,m as y}from"./proxy-0rKmIGA_.js";import{f as F}from"./format-CGyNCyRw.js";function x(s){const a=N(()=>L(s)),{isStatic:l}=n.useContext(E);if(l){const[,i]=n.useState(s);n.useEffect(()=>a.on("change",i),[])}return a}function v(s,a={}){const{isStatic:l}=n.useContext(E),i=n.useRef(null),m=N(()=>_(s)?s.get():s),d=N(()=>typeof m=="string"?m.replace(/[\d.-]/g,""):void 0),o=x(m),f=n.useRef(m),p=n.useRef(T),g=()=>{e(),i.current=U({keyframes:[w(o.get()),w(f.current)],velocity:o.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...a,onUpdate:p.current})},e=()=>{i.current&&i.current.stop()};return n.useInsertionEffect(()=>o.attach((c,h)=>l?h(c):(f.current=c,p.current=j=>h(M(j,d)),A.postRender(g),o.get()),e),[JSON.stringify(a)]),I(()=>{if(_(s))return s.on("change",c=>o.set(M(c,d)))},[o,d]),o}function M(s,a){return a?s+a:s}function w(s){return typeof s=="number"?s:parseFloat(s)}const b={damping:30,stiffness:100,mass:2},G=({event:s,onEventUpdate:a})=>{const l=n.useRef(null),{auth:i}=D().props,m=x(0),d=x(0),o=v(x(0),b),f=v(x(0),b),p=v(1,b),g=v(0),[e,c]=n.useState(s),[h,j]=n.useState(!1);n.useEffect(()=>{c(s)},[s]);const S=u=>{c(u),a&&a(u)};function C(u){if(!l.current)return;const r=l.current.getBoundingClientRect(),Y=u.clientX-r.left-r.width/2,$=(u.clientY-r.top-r.height/2)/(r.height/2)*-12,O=Y/(r.width/2)*12;o.set($),f.set(O),m.set(u.clientX-r.left),d.set(u.clientY-r.top)}function V(){p.set(1.05),g.set(1)}function R(){g.set(0),p.set(1),o.set(0),f.set(0)}return t.jsxs(t.Fragment,{children:[t.jsx("div",{onClick:()=>j(!0),className:"cursor-pointer",children:t.jsx("figure",{ref:l,className:"relative w-[300px] h-[200px] [perspective:800px] flex items-center justify-center z-10",onMouseMove:C,onMouseEnter:V,onMouseLeave:R,children:t.jsxs(y.div,{className:"relative w-full h-full [transform-style:preserve-3d]",style:{rotateX:o,rotateY:f,scale:p},children:[t.jsxs(y.div,{className:"absolute top-0 left-0 w-full h-full rounded-md overflow-hidden",children:[t.jsx("img",{src:e.cover_image?`/${e.cover_image}`:"/default-event-image.jpg",alt:e.title,className:"w-full h-full object-cover"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"})]}),t.jsx(y.div,{className:"absolute bottom-0 left-0 w-full p-2.5 pl-4 text-white",style:{transform:"translateZ(30px)"},children:t.jsxs("div",{className:"space-y-0.5",children:[t.jsx("span",{className:`inline-block px-1.5 py-0.5 rounded-full text-[10px] ${e.status==="Upcoming"?"bg-green-500":e.status==="Ongoing"?"bg-blue-500":"bg-gray-500"}`,children:e.status}),t.jsx("h3",{className:"text-base font-bold leading-tight truncate",children:e.title}),t.jsxs("div",{className:"flex items-center text-[10px]",children:[t.jsx("span",{className:"material-symbols-outlined text-xs mr-1",children:"calendar_today"}),t.jsxs("span",{children:[F(new Date(e.date),"MMM dd, yyyy")," â€¢ ",e.formatted_time]})]}),t.jsxs("div",{className:"flex items-center text-[10px]",children:[t.jsx("span",{className:"material-symbols-outlined text-xs mr-1",children:"location_on"}),t.jsx("span",{className:"truncate",children:e.location})]}),!e.is_external&&t.jsxs("div",{className:"flex items-center text-[10px]",children:[t.jsx("span",{className:"material-symbols-outlined text-xs mr-1",children:e.is_team_event?"groups":"group"}),t.jsx("span",{children:e.is_team_event?`${e.enrolled_teams_count||0}/${e.max_participants} teams`:`${e.enrolled_count}/${e.max_participants} participants`})]}),e.label_tags&&e.label_tags.length>0&&t.jsx("div",{className:"mt-1",children:t.jsx(X,{tags:e.label_tags,maxDisplay:2,className:"text-[8px]"})})]})})]})})}),t.jsx(k,{event:e,isOpen:h,onClose:()=>j(!1),onEventUpdate:S,auth:i})]})};export{G as T};
