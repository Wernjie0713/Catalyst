import{m as w,r as S,j as e,L as A}from"./index.esm-DYHbi2wE.js";import{A as F}from"./AuthenticatedLayout-C7BwTL0r.js";const C=`
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap');
`;function I({event:b,selectedUsers:i=[],selectedTeams:r=[],awardLevels:f={},isParticipationCertificate:s=!0,isTeamEvent:n=!1}){var x,u,y;const d=r.reduce((t,a)=>{const o=a.id||a.team_id;return t.find(h=>(h.id||h.team_id)===o)||t.push(a),t},[]),{data:l,setData:m,post:_,processing:c}=w({title:"",body_text:"",signature_image:null,is_participant_template:s,layout_settings:{titlePosition:{x:50,y:25},namePosition:{x:50,y:50},bodyPosition:{x:50,y:60},signaturePosition:{x:50,y:85},titleFontSize:40,nameFontSize:32,bodyFontSize:18,signatureWidth:150,titleColor:"#000000",nameColor:"#333333",bodyColor:"#444444",titleFontWeight:"bold",titleTextAlign:"center",nameTextAlign:"center",bodyTextAlign:"center",fontFamily:"'Playfair Display', serif"},selected_users:s||n?[]:i.map(t=>t.id),selected_teams:s?[]:d.map(t=>t.id||t.team_id),award_levels:f}),[g,v]=S.useState({signature:null}),j=(t,a)=>{if(m(t,a),a){const o=URL.createObjectURL(a);v(p=>({...p,[t.replace("_image","")]:o}))}},N=t=>{t.preventDefault(),_(route("certificates.store",b.event_id),{onSuccess:()=>{const a=document.createElement("div");a.className="fixed top-4 right-4 bg-green-500 text-white p-4 rounded-lg shadow-lg z-50 animate-bounce",a.innerHTML=`
                    <div class="flex items-center">
                        <span class="material-symbols-outlined mr-2">check_circle</span>
                        <p>Certificates created and assigned successfully!</p>
                    </div>
                `,document.body.appendChild(a),setTimeout(()=>{a.classList.add("opacity-0","transition-opacity","duration-500"),setTimeout(()=>a.remove(),500)},5e3)},onError:a=>{const o=document.createElement("div");o.className="fixed top-4 right-4 bg-red-500 text-white p-4 rounded-lg shadow-lg z-50 animate-bounce",o.innerHTML=`
                    <div class="flex items-center">
                        <span class="material-symbols-outlined mr-2">error</span>
                        <p>Failed to create certificates. Please try again.</p>
                    </div>
                `,document.body.appendChild(o),setTimeout(()=>{o.classList.add("opacity-0","transition-opacity","duration-500"),setTimeout(()=>o.remove(),500)},5e3),console.error("Error creating certificate template:",a)}})};return e.jsxs(F,{children:[e.jsx(A,{title:"Certificate Builder",children:e.jsx("style",{children:C})}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-[#18122B] overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("h1",{className:"text-xl font-semibold text-white",children:[s?"Create Participation Certificates":"Create Winner Certificates",n&&!s&&" for Teams"]}),e.jsx("div",{className:"px-3 py-1 rounded-full text-sm font-medium bg-indigo-600/20 text-indigo-400",children:s?"For All Participants":n?"For Selected Teams":"For Selected Winners"})]}),e.jsxs("form",{onSubmit:N,children:[e.jsx("input",{type:"hidden",name:"is_participant_template",value:s}),e.jsxs("div",{className:"mb-8 relative w-full aspect-[1.414] bg-white rounded-lg overflow-hidden",children:[e.jsx("img",{src:"/images/Certificate.png",className:"absolute inset-0 w-full h-full object-cover",alt:"Certificate Background",onError:t=>{console.error("Failed to load certificate background"),t.target.style.display="none",t.target.parentElement.style.backgroundColor="#f8f8f8"}}),e.jsx("div",{style:{position:"absolute",left:`${l.layout_settings.titlePosition.x}%`,top:`${l.layout_settings.titlePosition.y}%`,transform:"translate(-50%, -50%)",fontSize:`${l.layout_settings.titleFontSize}px`,fontWeight:l.layout_settings.titleFontWeight,color:l.layout_settings.titleColor,width:"80%",textAlign:l.layout_settings.titleTextAlign,fontFamily:"'Playfair Display', serif",letterSpacing:"1px",textTransform:"uppercase"},children:l.title||(s?"CERTIFICATE OF PARTICIPATION":"CERTIFICATE OF ACHIEVEMENT")}),e.jsx("div",{style:{position:"absolute",left:`${l.layout_settings.namePosition.x}%`,top:`${l.layout_settings.namePosition.y}%`,transform:"translate(-50%, -50%)",fontSize:`${l.layout_settings.nameFontSize}px`,color:l.layout_settings.nameColor,width:"70%",textAlign:l.layout_settings.nameTextAlign},children:s?"[Student Name]":n?((x=r==null?void 0:r[0])==null?void 0:x.name)||((u=r==null?void 0:r[0])==null?void 0:u.team_name)||"[Team Name]":((y=i==null?void 0:i[0])==null?void 0:y.name)||"[Winner Name]"}),e.jsx("div",{style:{position:"absolute",left:`${l.layout_settings.bodyPosition.x}%`,top:`${l.layout_settings.bodyPosition.y}%`,transform:"translate(-50%, -50%)",fontSize:`${l.layout_settings.bodyFontSize}px`,color:l.layout_settings.bodyColor,width:"80%",textAlign:l.layout_settings.bodyTextAlign},children:l.body_text||(s?"for participating in the event":n?"for outstanding team achievement in the event":"for outstanding achievement in the event")}),g.signature&&e.jsx("div",{style:{position:"absolute",left:`${l.layout_settings.signaturePosition.x}%`,top:`${l.layout_settings.signaturePosition.y}%`,transform:"translate(-50%, -50%)",width:`${l.layout_settings.signatureWidth}px`},children:e.jsx("img",{src:g.signature,className:"w-full h-auto",alt:"Signature"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Title"}),e.jsx("input",{type:"text",value:l.title,onChange:t=>m("title",t.target.value),placeholder:s?"CERTIFICATE OF PARTICIPATION":"CERTIFICATE OF ACHIEVEMENT",className:"mt-1 block w-full rounded-md bg-[#242031] border-gray-700 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Signature Image"}),e.jsx("input",{type:"file",onChange:t=>j("signature_image",t.target.files[0]),className:"mt-1 block w-full text-gray-300",accept:"image/*"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Body Text"}),e.jsx("textarea",{value:l.body_text,onChange:t=>m("body_text",t.target.value),rows:4,className:"mt-1 block w-full rounded-md bg-[#242031] border-gray-700 text-white",placeholder:s?"for participating in the event":n?"for outstanding team achievement in the event":"for outstanding achievement in the event"})]})]}),!s&&n&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"Selected Teams"}),e.jsx("div",{className:"bg-[#242031] rounded-lg p-4",children:(d==null?void 0:d.length)>0?e.jsx("ul",{className:"space-y-3",children:d.map(t=>e.jsxs("li",{className:"text-gray-300",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:t.name||t.team_name}),l.award_levels[t.id||t.team_id]&&e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${l.award_levels[t.id||t.team_id]==="gold"?"bg-yellow-500/30 text-yellow-200":l.award_levels[t.id||t.team_id]==="silver"?"bg-gray-400/30 text-gray-200":"bg-amber-700/30 text-amber-200"}`,children:l.award_levels[t.id||t.team_id].charAt(0).toUpperCase()+l.award_levels[t.id||t.team_id].slice(1)})]}),e.jsx("div",{className:"mt-1 ml-4 text-sm text-gray-400",children:t.members?e.jsx("span",{children:t.members.map(a=>a.name).join(", ")}):e.jsxs("span",{children:["(",t.member_count||0," members)"]})})]},t.id||t.team_id))}):e.jsx("p",{className:"text-gray-400",children:"No teams selected"})})]}),!s&&!n&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"Selected Winners"}),e.jsx("div",{className:"bg-[#242031] rounded-lg p-4",children:(i==null?void 0:i.length)>0?e.jsx("ul",{className:"space-y-2",children:i.map(t=>e.jsx("li",{className:"text-gray-300",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:t.name}),l.award_levels[t.id]&&e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${l.award_levels[t.id]==="gold"?"bg-yellow-500/30 text-yellow-200":l.award_levels[t.id]==="silver"?"bg-gray-400/30 text-gray-200":"bg-amber-700/30 text-amber-200"}`,children:l.award_levels[t.id].charAt(0).toUpperCase()+l.award_levels[t.id].slice(1)})]})},t.id))}):e.jsx("p",{className:"text-gray-400",children:"No winners selected"})})]}),!s&&!n&&e.jsx("input",{type:"hidden",name:"selected_users",value:JSON.stringify(i.map(t=>t.id))}),!s&&n&&e.jsx("input",{type:"hidden",name:"selected_teams",value:JSON.stringify(r.map(t=>t.id||t.team_id))}),!s&&e.jsx("input",{type:"hidden",name:"award_levels",value:JSON.stringify(l.award_levels)}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[e.jsx("a",{href:route("events.my-events"),className:"px-4 py-2 bg-gray-700 text-gray-300 rounded-md hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-[#635985] text-white rounded-md hover:bg-[#443C68] transition-colors",children:c?"Creating...":`Create ${s?"Participation":n?"Team Winner":"Winner"} Certificates`})]})]})]})})})]})}const z=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"}));export{z as _};
