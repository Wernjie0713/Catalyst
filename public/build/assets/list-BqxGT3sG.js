import{j as e,S as N,r as n,a as j,L as me}from"./index.esm-DYHbi2wE.js";import{A as ue}from"./AuthenticatedLayout-C7BwTL0r.js";import{D as xe}from"./DisplayProfilePhoto-JFqyhybw.js";import{m as l}from"./proxy-oAEZJcFV.js";import{z as S}from"./transition-DTKzzgZY.js";import{y as k,M as pe}from"./Modal-CitSm-79.js";import{A as W}from"./index-CkxCHxkU.js";import"./index-BdFZFnLD.js";function V({friend:s,otherUser:r,photoPath:a,isRequestReceiver:p,onAccept:b,onReject:o,compact:i=!1}){const m=()=>{N.visit(route("profile.view",{user:r.id}))};return e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},onClick:m,className:`relative group ${i?"p-3":"p-6"} bg-gradient-to-br from-gray-800/50 via-gray-900/50 to-gray-950/50 rounded-xl backdrop-blur-sm border border-white/5 hover:border-white/10 transition-all duration-300 cursor-pointer`,children:[e.jsx("div",{className:"absolute inset-0 bg-grid-white/[0.02] bg-[size:20px_20px] rounded-2xl "}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 via-transparent to-blue-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-2xl "}),e.jsxs("div",{className:`relative flex flex-col items-center space-y-4 ${i?"gap-3":"gap-4"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -inset-2 bg-gradient-to-br from-purple-500/20 to-blue-500/20 rounded-full blur-md opacity-0 group-hover:opacity-100 transition-opacity duration-300 "}),e.jsx("div",{className:"relative w-24 h-24 rounded-full overflow-hidden ",children:e.jsx(xe,{profilePhotoPath:a,className:"w-full h-full object-cover"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:`text-lg font-medium text-white group-hover:text-purple-200 transition-colors duration-300 truncate max-w-[200px] ${i?"text-sm":""}`,children:r==null?void 0:r.name}),e.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors duration-300 ",children:r==null?void 0:r.email})]}),s.status==="pending"&&p&&e.jsxs("div",{className:"flex justify-center space-x-2",onClick:y=>y.stopPropagation(),children:[e.jsx(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>b(s.id),className:"px-4 py-2 bg-gradient-to-r from-blue-500/20 to-purple-600/20 hover:from-blue-500/30 hover:to-purple-600/30 text-white rounded-xl text-sm border border-white/10 hover:border-white/20 transition-all duration-200 ",children:"Accept"}),e.jsx(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o(s.id),className:"px-4 py-2 bg-gradient-to-r from-red-500/20 to-pink-600/20 hover:from-red-500/30 hover:to-pink-600/30 text-white rounded-xl text-sm border border-white/10 hover:border-white/20 transition-all duration-200 ",children:"Reject"})]})]})]})}function he({activeTab:s,onTabChange:r}){return e.jsxs("div",{className:"flex space-x-4 mb-6 justify-center",children:[e.jsx("button",{onClick:()=>r("all"),className:`px-4 py-2 rounded-lg transition-all duration-200 ${s==="all"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"text-gray-400 hover:text-gray-300"}`,children:"All Friends"}),e.jsx("button",{onClick:()=>r("teams"),className:`px-4 py-2 rounded-lg transition-all duration-200 ${s==="teams"?"bg-purple-500/20 text-purple-400 border border-purple-500/30":"text-gray-400 hover:text-gray-300"}`,children:"Teams"})]})}function K({icon:s="group",message:r,description:a}){return e.jsx("div",{className:"bg-gradient-to-br from-gray-800/30 via-gray-900/30 to-gray-950/30 rounded-xl p-6 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl text-gray-500 mb-2",children:s}),e.jsx("p",{className:"text-gray-400",children:r}),a&&e.jsx("p",{className:"text-gray-500 text-sm",children:a})]})})}function X({value:s,onChange:r,placeholder:a="Search friends by name..."}){return e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"search"})}),e.jsx("input",{type:"text",value:s,onChange:p=>r(p.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-800/50 border border-white/5 rounded-lg text-gray-300 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/20",placeholder:a})]})})}function ge({isOpen:s,onClose:r,friends:a,onTeamCreated:p,auth:b}){const[o,i]=n.useState(""),[m,y]=n.useState([]),[u,x]=n.useState({}),[g,w]=n.useState(!1),_=async d=>{var v,h;d.preventDefault(),x({}),w(!0);try{const f=await j.post(route("teams.store"),{name:o,members:m});f.data.success&&(p(f.data.team),i(""),y([]),r())}catch(f){x(((h=(v=f.response)==null?void 0:v.data)==null?void 0:h.errors)||{general:"Failed to create team"})}finally{w(!1)}};return e.jsx(S,{appear:!0,show:s,as:n.Fragment,children:e.jsxs(k,{as:"div",className:"relative z-50",onClose:r,children:[e.jsx(S.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(S.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(k.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-gradient-to-br from-gray-800/80 via-gray-900/90 to-gray-950/95 p-6 text-left align-middle shadow-xl transition-all border border-white/10",children:[e.jsx(k.Title,{as:"h3",className:"text-lg font-medium leading-6 text-white mb-4",children:"Create a New Team"}),e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"teamName",className:"block text-sm font-medium text-gray-400 mb-2",children:"Team Name"}),e.jsx("input",{type:"text",id:"teamName",value:o,onChange:d=>i(d.target.value),className:"w-full px-3 py-2 bg-gray-800/50 border border-white/10 rounded-lg text-white focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500/60",placeholder:"Enter team name"}),u.name&&e.jsx("p",{className:"mt-1 text-sm text-red-400",children:u.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Select Members"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:a.map(d=>e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-800/30 rounded-lg",children:[e.jsx("input",{type:"checkbox",id:`friend-${d.id}`,value:d.id,checked:m.includes(d.id),onChange:v=>{v.target.checked?y([...m,d.id]):y(m.filter(h=>h!==d.id))},className:"rounded border-gray-700 text-purple-500 focus:ring-purple-500/30 bg-gray-800"}),e.jsx("label",{htmlFor:`friend-${d.id}`,className:"text-white",children:d.name})]},d.id))}),u.friends&&e.jsx("p",{className:"mt-1 text-sm text-red-400",children:u.friends})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 rounded-lg bg-gray-800/50 text-white text-sm hover:bg-gray-800/70 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g||!o||m.length===0,className:"px-4 py-2 rounded-lg bg-purple-500/20 text-purple-400 text-sm hover:bg-purple-500/30 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Creating...":"Create Team"})]})]})]})})})})]})})}function be({team:s,status:r,isInvited:a,onAccept:p,onReject:b,onClick:o}){var i;return s?e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative group",children:e.jsxs("div",{className:"relative p-6 bg-gradient-to-br from-gray-800/80 via-gray-900/90 to-gray-950/95 rounded-2xl backdrop-blur-md border border-white/5 hover:border-white/10 transition-all duration-300",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-white/[0.02] bg-[size:20px_20px] rounded-2xl"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 via-transparent to-blue-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-2xl"}),e.jsxs("div",{className:"relative flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -inset-2 bg-gradient-to-br from-purple-500/20 to-blue-500/20 rounded-full blur-md opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-700/50 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-3xl text-gray-400",children:"group"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-white group-hover:text-purple-200 transition-colors duration-300",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors duration-300",children:["Created by: ",(i=s.creator)==null?void 0:i.name]}),e.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Members: ",s.member_count]})]}),r==="pending"&&a?e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("button",{onClick:p,className:"px-4 py-2 bg-blue-500/20 hover:bg-blue-500/30 text-white rounded-lg",children:"Accept"}),e.jsx("button",{onClick:b,className:"px-4 py-2 bg-red-500/20 hover:bg-red-500/30 text-white rounded-lg",children:"Reject"})]}):e.jsx("button",{onClick:o,className:"w-full px-4 py-2 bg-purple-500/20 hover:bg-purple-500/30 text-white rounded-lg",children:"View Details"})]})]})}):null}function ye({isOpen:s,onClose:r,team:a,onDelete:p,onRemoveMember:b,onAddMember:o,auth:i}){if(!a)return null;const m=a.members.filter(u=>u.status==="accepted"&&u.user_id!==a.creator_id),y=m.length+1;return e.jsx(S,{appear:!0,show:s,as:n.Fragment,children:e.jsxs(k,{as:"div",className:"relative z-50",onClose:r,children:[e.jsx(S.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(S.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(k.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-gradient-to-br from-gray-800/80 via-gray-900/90 to-gray-950/95 p-6 text-left align-middle shadow-xl transition-all border border-white/10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Team Details"}),(a==null?void 0:a.creator_id)===i.user.id&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>o(a),className:"text-emerald-400 hover:text-emerald-300 transition-colors",title:"Add Member",children:e.jsx("span",{className:"material-symbols-outlined",children:"person_add"})}),e.jsx("button",{onClick:()=>p(a.id),className:"text-red-400 hover:text-red-300 transition-colors",title:"Delete Team",children:e.jsx("span",{className:"material-symbols-outlined",children:"delete"})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"Team Name"}),e.jsx("div",{className:"bg-gradient-to-r from-gray-800/50 to-gray-900/50 p-3 rounded-lg border border-white/5",children:e.jsx("p",{className:"text-lg text-white font-medium",children:a.name})}),e.jsxs("div",{className:"mt-2 text-sm text-gray-400 flex items-center",children:[e.jsx("span",{className:"material-symbols-outlined text-sm mr-1",children:"group"}),"Total Members: ",y]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"Team Leader"}),e.jsx("div",{className:"bg-gradient-to-r from-gray-800/50 to-gray-900/50 p-3 rounded-lg border border-white/5",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"material-symbols-outlined text-yellow-500",children:"star"}),e.jsx("p",{className:"text-white",children:a.creator.name})]})})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:["Team Members (",m.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:m.map(u=>{var x;return e.jsxs("div",{className:"bg-gradient-to-r from-gray-800/50 to-gray-900/50 p-3 rounded-lg border border-white/5 flex items-center justify-between",children:[e.jsx("span",{className:"text-white",children:u.user.name}),a.creator_id===((x=i==null?void 0:i.user)==null?void 0:x.id)&&u.user_id!==a.creator_id&&e.jsx("button",{onClick:()=>{confirm("Are you sure you want to remove this member from the team?")&&b(a.id,u.user_id)},className:"text-red-400 hover:text-red-500 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"remove_circle"})})]},u.id)})})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{type:"button",className:"px-4 py-2 rounded-lg bg-white/5 hover:bg-white/10 text-white text-sm font-medium transition-colors duration-200 border border-white/10",onClick:r,children:"Close"})})]})})})})]})})}function ve({invitation:s}){const r=async()=>{try{await j.post(route("teams.accept-invitation",s.team.id)),window.location.reload()}catch(p){console.error("Error accepting invitation:",p)}},a=async()=>{try{await j.post(route("teams.reject-invitation",s.team.id)),window.location.reload()}catch(p){console.error("Error rejecting invitation:",p)}};return e.jsx("div",{className:"bg-gradient-to-br from-gray-800/50 via-gray-900/50 to-gray-950/50 rounded-xl p-6 backdrop-blur-sm border border-white/5",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-700/50 flex items-center justify-center mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-3xl text-gray-400",children:"group"})}),e.jsx("h3",{className:"text-xl font-medium text-white mb-1",children:s.team.name}),e.jsxs("p",{className:"text-gray-400 text-sm mb-4",children:["Created by: ",s.team.creator.name]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(l.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:r,className:"px-4 py-2 bg-green-500/20 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors duration-200",children:"Accept"}),e.jsx(l.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:a,className:"px-4 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors duration-200",children:"Reject"})]})]})})}function fe({isOpen:s,onClose:r,friendRequests:a,onAccept:p,onReject:b,getOtherUser:o,getProfilePhotoPath:i,isRequestReceiver:m,auth:y}){const u=n.useRef(null);return n.useEffect(()=>{const x=g=>{u.current&&!u.current.contains(g.target)&&r()};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[r]),e.jsx(W,{children:s&&e.jsx(l.div,{ref:u,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute right-0 mt-2 w-96 bg-gradient-to-br from-gray-800/95 via-gray-900/95 to-gray-950/95 rounded-xl shadow-lg border border-white/10 backdrop-blur-xl z-50",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Incoming Friend Requests"}),e.jsxs("span",{className:"bg-blue-500/20 text-blue-400 px-2 py-1 rounded-full text-xs",children:[a.length," pending"]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:a.length>0?a.map(x=>e.jsx(V,{friend:x,otherUser:o(x),photoPath:i(o(x)),isRequestReceiver:m(x),onAccept:p,onReject:b,compact:!0},`friend-${x.id}`)):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl text-gray-500 mb-2",children:"person_off"}),e.jsx("p",{className:"text-gray-400",children:"No friend requests yet"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"When someone adds you, their request will appear here"})]})})]})})})}function je({isOpen:s,onClose:r,pendingInvitations:a,onAccept:p,onReject:b}){const o=n.useRef(null);return n.useEffect(()=>{const i=m=>{o.current&&!o.current.contains(m.target)&&r()};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[r]),e.jsx(W,{children:s&&e.jsx(l.div,{ref:o,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute right-0 mt-2 w-96 bg-gradient-to-br from-gray-800/95 via-gray-900/95 to-gray-950/95 rounded-xl shadow-lg border border-white/10 backdrop-blur-xl z-50",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Team Invitations"}),e.jsxs("span",{className:"bg-blue-500/20 text-blue-400 px-2 py-1 rounded-full text-xs",children:[a.length," pending"]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:a.length>0?a.map(i=>e.jsx(ve,{invitation:i,onAccept:()=>p(i.team_id),onReject:()=>b(i.team_id),compact:!0},i.id)):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl text-gray-500 mb-2",children:"groups"}),e.jsx("p",{className:"text-gray-400",children:"No team invitations"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"When someone invites you to a team, it will appear here"})]})})]})})})}function Ne({isOpen:s,onClose:r,team:a,onSuccess:p}){const[b,o]=n.useState([]),[i,m]=n.useState(""),[y,u]=n.useState(!1),[x,g]=n.useState("");n.useEffect(()=>{s&&a&&w()},[s,a]);const w=async()=>{var d,v;try{const h=await j.get(route("teams.available-friends",a.id));Array.isArray(h.data)&&h.data.length===0?g("No available friends found. They might all be in the team already."):Array.isArray(h.data)?(o(h.data),g("")):g("Invalid response format from server")}catch(h){g(((v=(d=h.response)==null?void 0:d.data)==null?void 0:v.message)||"Failed to load available friends"),o([])}},_=async d=>{var v,h;if(d.preventDefault(),!!i){u(!0),g("");try{await j.post(route("teams.add-member"),{team_id:a.id,user_id:i}),p()}catch(f){console.error("Error adding member:",f),g(((h=(v=f.response)==null?void 0:v.data)==null?void 0:h.message)||"Failed to add member")}finally{u(!1)}}};return e.jsx(pe,{show:s,onClose:r,maxWidth:"sm",children:e.jsx("div",{className:"bg-[#1a1f2e] rounded-lg",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Add to Team"})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Team Name"}),e.jsx("div",{className:"bg-[#12151f] p-2.5 rounded-md",children:e.jsx("p",{className:"text-white",children:a==null?void 0:a.name})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Select Friend"}),e.jsx("div",{className:"relative",children:e.jsxs("select",{value:i,onChange:d=>m(d.target.value),className:"w-full bg-[#12151f] text-white p-2.5 rounded-md border border-gray-700/50 focus:border-blue-500/50 focus:ring-0",required:!0,children:[e.jsx("option",{value:"",className:"bg-[#12151f]",children:"Choose a friend"}),b.map(d=>e.jsx("option",{value:d.id,className:"bg-[#12151f]",children:d.name},d.id))]})})]}),x&&e.jsx("div",{className:"mb-4 text-sm text-red-400 bg-red-500/10 p-2 rounded-md",children:x}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(l.button,{type:"button",onClick:r,whileHover:{scale:1.02},whileTap:{scale:.98},className:"px-4 py-2 bg-[#12151f] text-white rounded-md hover:bg-[#1a1f2e] transition-colors",children:"Close"}),e.jsx(l.button,{onClick:_,disabled:y||!i,whileHover:{scale:1.02},whileTap:{scale:.98},className:`px-4 py-2 bg-[#12151f] text-white rounded-md hover:bg-[#1a1f2e] transition-colors ${y||!i?"opacity-50 cursor-not-allowed":""}`,children:y?"Adding...":"Add to Team"})]})]})})})}function we({auth:s,friends:r=[],teams:a=[],pendingInvitations:p=[],can:b}){const[o,i]=n.useState(()=>{const t=new URL(window.location.href).searchParams.get("tab")||"all";return!b.team_grouping&&t==="teams"?"all":t}),[m,y]=n.useState(""),[u,x]=n.useState(!1),[g,w]=n.useState(a),[_,d]=n.useState(null),[v,h]=n.useState(!1),[f,Q]=n.useState(!1),[Y,F]=n.useState(!1),[R,Z]=n.useState([]),[B,M]=n.useState(!1),[U,E]=n.useState(null),ee={initial:{opacity:0},animate:{opacity:1,transition:{duration:.5,when:"beforeChildren",staggerChildren:.1}}},I={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08,delayChildren:.1}}},L={hidden:{opacity:0,y:20},visible:t=>({opacity:1,y:0,transition:{delay:t*.05,duration:.4,ease:"easeOut"}}),hover:{y:-5,boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.2)",transition:{duration:.2}}},G={hover:{scale:1.05,transition:{duration:.2}},tap:{scale:.95,transition:{duration:.1}}},O={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.4,ease:[.25,.1,.25,1],when:"beforeChildren"}}},P={hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1,transition:{delay:.1,duration:.4,type:"spring",stiffness:100}}};n.useEffect(()=>{o==="teams"&&b.team_grouping&&g.length===0&&T()},[o]);const T=async()=>{try{const t=await j.get(route("teams.index"));w(t.data.teams),Z(t.data.pendingInvitations)}catch(t){console.error("Error fetching teams:",t)}},te=t=>{w(c=>[...c,t]),x(!1)},$=t=>{N.post(route("friend.accept",t),{},{preserveScroll:!0})},D=t=>{N.post(route("friend.reject",t),{},{preserveScroll:!0})},J=r.filter(t=>o==="all"?!0:o==="pending"?t.status==="pending":o==="teams"?t.status==="accepted":!0),q=t=>t.friend_id===s.user.id,C=t=>t.user_id===s.user.id?t.friend:t.user,H=t=>t?t.student?t.student.profile_photo_path:t.lecturer?t.lecturer.profile_photo_path:t.department_staff?t.department_staff.profile_photo_path:t.organizer?t.organizer.profile_photo_path:null:null,ae=r.filter(t=>t.status==="accepted").map(t=>{const c=C(t);return{id:c.id,name:c.name,email:c.email}});[...r.filter(t=>t.status==="pending"),...g.filter(t=>t.members.some(c=>c.user_id===s.user.id&&c.status==="pending"))];const se=t=>{d(t),h(!0)},re=async t=>{try{await j.delete(route("teams.destroy",t)),h(!1),N.visit(route("friends.list",{tab:"teams"}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{T()}})}catch(c){console.error("Error deleting team:",c),alert("Failed to delete team")}},z=r.filter(t=>t.status==="pending"&&t.friend_id===s.user.id),ie=async t=>{try{await j.post(route("teams.accept-invitation",t)),F(!1),N.visit(route("friends.list",{tab:"teams"}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{T()}})}catch(c){console.error("Error accepting team invitation:",c)}},le=async t=>{try{await j.post(route("teams.reject-invitation",t)),F(!1),N.visit(route("friends.list",{tab:"teams"}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{T()}})}catch(c){console.error("Error rejecting team invitation:",c)}},ne=async(t,c)=>{try{await j.delete(route("teams.remove-member",{teamId:t,userId:c})),h(!1),N.visit(route("friends.list",{tab:"teams"}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{T()}})}catch(A){console.error("Error removing team member:",A),alert("Failed to remove team member")}},oe=t=>{E(t),M(!0),h(!1)},de=()=>{M(!1),E(null),N.visit(route("friends.list",{tab:"teams"}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{T()}})};return e.jsxs(ue,{user:s.user,children:[e.jsx(me,{title:"Friends & Teams"}),e.jsx(l.div,{className:"py-12",initial:"initial",animate:"animate",variants:ee,children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx(l.div,{className:"bg-gradient-to-br from-gray-800/50 via-gray-900/50 to-gray-950/50 rounded-2xl backdrop-blur-sm border border-white/5",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("div",{className:"p-6",children:[e.jsx(he,{activeTab:o,onTabChange:i}),o!=="teams"&&e.jsxs(l.div,{className:"flex items-center justify-between mb-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2,duration:.4},children:[e.jsx("div",{className:"flex-1",children:e.jsx(X,{value:m,onChange:y})}),e.jsxs("div",{className:"relative ml-4",children:[e.jsxs(l.button,{onClick:()=>Q(!f),whileHover:{scale:1.02},whileTap:{scale:.98},className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500/20 to-purple-600/20 hover:from-blue-500/30 hover:to-purple-600/30 text-white rounded-lg text-sm border border-white/10 hover:border-white/20 transition-all duration-200",children:[e.jsx("span",{className:"material-symbols-outlined text-sm mr-2",children:"person_add"}),"Friend Requests",z.length>0&&e.jsx(l.span,{className:"ml-2 bg-red-500/30 px-2 py-0.5 rounded-full text-xs",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:400,damping:10},children:z.length})]}),e.jsx(fe,{isOpen:f,onClose:()=>Q(!1),friendRequests:z,onAccept:$,onReject:D,getOtherUser:C,getProfilePhotoPath:H,isRequestReceiver:q,auth:s})]})]}),e.jsx(W,{mode:"sync",children:o==="teams"?e.jsxs(l.div,{initial:"hidden",animate:"visible",variants:O,className:"overflow-hidden",children:[e.jsxs(l.div,{className:"flex items-center justify-between mb-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},children:[e.jsx("div",{className:"flex-1",children:e.jsx(X,{value:m,onChange:y,placeholder:"Search teams by name..."})}),e.jsxs("div",{className:"flex gap-4 ml-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(l.button,{onClick:()=>F(!Y),whileHover:"hover",whileTap:"tap",variants:G,className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-orange-500/20 to-red-600/20 hover:from-orange-500/30 hover:to-red-600/30 text-white rounded-lg text-sm border border-white/10 hover:border-white/20 transition-all duration-200",children:[e.jsx("span",{className:"material-symbols-outlined text-sm mr-2",children:"mail"}),"Team Invitations",R.length>0&&e.jsx(l.span,{className:"ml-2 bg-red-500/30 px-2 py-0.5 rounded-full text-xs",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:400,damping:10},children:R.length})]}),e.jsx(je,{isOpen:Y,onClose:()=>F(!1),pendingInvitations:R,onAccept:ie,onReject:le,auth:s})]}),e.jsxs(l.button,{onClick:()=>x(!0),whileHover:"hover",whileTap:"tap",variants:G,className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500/20 to-purple-600/20 hover:from-blue-500/30 hover:to-purple-600/30 text-white rounded-lg text-sm border border-white/10 hover:border-white/20 transition-all duration-200",children:[e.jsx("span",{className:"material-symbols-outlined text-sm mr-2",children:"group_add"}),"Create Team"]})]})]}),e.jsxs(l.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",variants:I,children:[g.filter(t=>t.name.toLowerCase().includes(m.toLowerCase())).map((t,c)=>e.jsx(l.div,{custom:c,variants:L,whileHover:"hover",children:e.jsx(be,{team:t,status:"accepted",onClick:()=>se(t)})},t.id)),g.length===0&&e.jsx(l.div,{className:"col-span-full",variants:P,children:e.jsx(K,{icon:"groups",message:"No teams yet",description:"Create a team to start collaborating with others"})})]})]},"teams"):o==="pending"?e.jsx(l.div,{initial:"hidden",animate:"visible",variants:O,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 overflow-hidden",children:e.jsxs(l.div,{variants:I,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 col-span-full",children:[r.filter(t=>t.status==="pending").map((t,c)=>e.jsx(l.div,{custom:c,variants:L,whileHover:"hover",children:e.jsx(V,{friend:t,otherUser:C(t),photoPath:H(C(t)),isRequestReceiver:q(t),onAccept:$,onReject:D})},`friend-${t.id}`)),!r.some(t=>t.status==="pending")&&e.jsx(l.div,{className:"col-span-full",variants:P,children:e.jsx(K,{message:"No pending friend requests"})})]})},"pending"):e.jsx(l.div,{initial:"hidden",animate:"visible",variants:O,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 overflow-hidden",children:e.jsxs(l.div,{variants:I,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 col-span-full",children:[J.filter(t=>t.status==="accepted").filter(t=>C(t).name.toLowerCase().includes(m.toLowerCase())).map((t,c)=>{const A=C(t),ce=H(A);return e.jsx(l.div,{custom:c,variants:L,whileHover:"hover",children:e.jsx(V,{friend:t,otherUser:A,photoPath:ce,isRequestReceiver:q(t),onAccept:$,onReject:D,teams:g})},t.id)}),J.filter(t=>t.status==="accepted").length===0&&e.jsx(l.div,{className:"col-span-full",variants:P,children:e.jsx(l.div,{className:"bg-gradient-to-br from-gray-800/30 via-gray-900/30 to-gray-950/30 rounded-xl p-6 text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},children:e.jsxs(l.div,{className:"flex flex-col items-center justify-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3,duration:.5,type:"spring",stiffness:100},children:[e.jsx(l.span,{className:"material-symbols-outlined text-4xl text-gray-500 mb-2",initial:{rotateY:90},animate:{rotateY:0},transition:{delay:.4,duration:.6,type:"spring"},children:"group"}),e.jsx(l.p,{className:"text-gray-400",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.5},children:"No friends added yet"}),e.jsx(l.p,{className:"text-gray-500 text-sm",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.5},children:"Start by adding friends to your network"})]})})})]})},"all")})]})})})}),b.team_grouping&&e.jsx(ge,{isOpen:u,onClose:()=>x(!1),friends:ae,onTeamCreated:te,auth:s}),e.jsx(ye,{isOpen:v,onClose:()=>h(!1),team:_,onDelete:re,onRemoveMember:ne,onAddMember:oe,auth:s}),B&&e.jsx(Ne,{isOpen:B,onClose:()=>{M(!1),E(null)},team:U,onSuccess:de})]})}const Me=Object.freeze(Object.defineProperty({__proto__:null,default:we},Symbol.toStringTag,{value:"Module"}));export{Me as _};
