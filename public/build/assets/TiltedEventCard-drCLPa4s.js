import{r as n,j as e}from"./index-D3Bj6weo.js";import{T as X,E as k}from"./EventModal-Duo_tS7O.js";import{K as D}from"./index.esm-CYkcvaz4.js";import{u as N,a as L,M as E,i as M,n as T,f as A,b as I,c as U,m as y}from"./proxy-0rKmIGA_.js";import{f as F}from"./format-CH5JauY5.js";function x(s){const a=N(()=>L(s)),{isStatic:l}=n.useContext(E);if(l){const[,i]=n.useState(s);n.useEffect(()=>a.on("change",i),[])}return a}function v(s,a={}){const{isStatic:l}=n.useContext(E),i=n.useRef(null),m=N(()=>M(s)?s.get():s),d=N(()=>typeof m=="string"?m.replace(/[\d.-]/g,""):void 0),o=x(m),f=n.useRef(m),p=n.useRef(T),g=()=>{t(),i.current=U({keyframes:[w(o.get()),w(f.current)],velocity:o.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...a,onUpdate:p.current})},t=()=>{i.current&&i.current.stop()};return n.useInsertionEffect(()=>o.attach((c,h)=>l?h(c):(f.current=c,p.current=j=>h(_(j,d)),A.postRender(g),o.get()),t),[JSON.stringify(a)]),I(()=>{if(M(s))return s.on("change",c=>o.set(_(c,d)))},[o,d]),o}function _(s,a){return a?s+a:s}function w(s){return typeof s=="number"?s:parseFloat(s)}const b={damping:30,stiffness:100,mass:2},G=({event:s,onEventUpdate:a})=>{const l=n.useRef(null),{auth:i}=D().props,m=x(0),d=x(0),o=v(x(0),b),f=v(x(0),b),p=v(1,b),g=v(0),[t,c]=n.useState(s),[h,j]=n.useState(!1);n.useEffect(()=>{c(s)},[s]);const S=u=>{c(u),a&&a(u)};function C(u){if(!l.current)return;const r=l.current.getBoundingClientRect(),Y=u.clientX-r.left-r.width/2,$=(u.clientY-r.top-r.height/2)/(r.height/2)*-12,O=Y/(r.width/2)*12;o.set($),f.set(O),m.set(u.clientX-r.left),d.set(u.clientY-r.top)}function V(){p.set(1.05),g.set(1)}function R(){g.set(0),p.set(1),o.set(0),f.set(0)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>j(!0),className:"cursor-pointer",children:e.jsx("figure",{ref:l,className:"relative w-[300px] h-[200px] [perspective:800px] flex items-center justify-center z-10",onMouseMove:C,onMouseEnter:V,onMouseLeave:R,children:e.jsxs(y.div,{className:"relative w-full h-full [transform-style:preserve-3d]",style:{rotateX:o,rotateY:f,scale:p},children:[e.jsxs(y.div,{className:"absolute top-0 left-0 w-full h-full rounded-md overflow-hidden",children:[e.jsx("img",{src:t.cover_image?`/${t.cover_image}`:"/default-event-image.jpg",alt:t.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"})]}),e.jsx(y.div,{className:"absolute bottom-0 left-0 w-full p-2.5 pl-4 text-white",style:{transform:"translateZ(30px)"},children:e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("span",{className:`inline-block px-1.5 py-0.5 rounded-full text-[10px] ${t.status==="Upcoming"?"bg-green-500":t.status==="Ongoing"?"bg-blue-500":"bg-gray-500"}`,children:t.status}),e.jsx("h3",{className:"text-base font-bold leading-tight truncate",children:t.title}),e.jsxs("div",{className:"flex items-center text-[10px]",children:[e.jsx("span",{className:"material-symbols-outlined text-xs mr-1",children:"calendar_today"}),e.jsxs("span",{children:[F(new Date(t.date),"MMM dd, yyyy")," â€¢ ",t.formatted_time]})]}),e.jsxs("div",{className:"flex items-center text-[10px]",children:[e.jsx("span",{className:"material-symbols-outlined text-xs mr-1",children:"location_on"}),e.jsx("span",{className:"truncate",children:t.location})]}),e.jsxs("div",{className:"flex items-center text-[10px]",children:[e.jsx("span",{className:"material-symbols-outlined text-xs mr-1",children:t.is_team_event?"groups":"group"}),e.jsx("span",{children:t.is_team_event?`${t.enrolled_teams_count||0}/${t.max_participants} teams`:`${t.enrolled_count}/${t.max_participants} participants`})]}),t.label_tags&&t.label_tags.length>0&&e.jsx("div",{className:"mt-1",children:e.jsx(X,{tags:t.label_tags,maxDisplay:2,className:"text-[8px]"})})]})})]})})}),e.jsx(k,{event:t,isOpen:h,onClose:()=>j(!1),onEventUpdate:S,auth:i})]})};export{G as T};
