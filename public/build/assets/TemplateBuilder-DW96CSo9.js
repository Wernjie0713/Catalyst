import{r as w,j as e}from"./index-D3Bj6weo.js";import{m as S,L as A}from"./index.esm-CYkcvaz4.js";import{A as F}from"./AuthenticatedLayout-DgmrdonU.js";import"./en-US-DNUEYIb-.js";const C=`
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap');
`;function I({event:h,selectedUsers:r=[],selectedTeams:i=[],awardLevels:f={},isParticipationCertificate:l=!0,isTeamEvent:n=!1}){var x,u,y;const d=i.reduce((t,s)=>{const o=s.id||s.team_id;return t.find(b=>(b.id||b.team_id)===o)||t.push(s),t},[]),{data:a,setData:m,post:_,processing:g}=S({title:"",body_text:"",signature_image:null,is_participant_template:l,layout_settings:{titlePosition:{x:50,y:25},namePosition:{x:50,y:50},bodyPosition:{x:50,y:60},signaturePosition:{x:50,y:85},titleFontSize:40,nameFontSize:32,bodyFontSize:18,signatureWidth:150,titleColor:"#000000",nameColor:"#333333",bodyColor:"#444444",titleFontWeight:"bold",titleTextAlign:"center",nameTextAlign:"center",bodyTextAlign:"center",fontFamily:"'Playfair Display', serif"},selected_users:l||n?[]:r.map(t=>t.id),selected_teams:l?[]:d.map(t=>t.id||t.team_id),award_levels:f}),[c,v]=w.useState({signature:null}),j=(t,s)=>{if(m(t,s),s){const o=URL.createObjectURL(s);v(p=>({...p,[t.replace("_image","")]:o}))}},N=t=>{t.preventDefault(),_(route("certificates.store",h.event_id),{onSuccess:()=>{const s=document.createElement("div");s.className="fixed top-4 right-4 bg-green-500 text-white p-4 rounded-lg shadow-lg z-50 animate-bounce",s.innerHTML=`
                    <div class="flex items-center">
                        <span class="material-symbols-outlined mr-2">check_circle</span>
                        <p>Certificates created and assigned successfully!</p>
                    </div>
                `,document.body.appendChild(s),setTimeout(()=>{s.classList.add("opacity-0","transition-opacity","duration-500"),setTimeout(()=>s.remove(),500)},5e3)},onError:s=>{const o=document.createElement("div");o.className="fixed top-4 right-4 bg-red-500 text-white p-4 rounded-lg shadow-lg z-50 animate-bounce",o.innerHTML=`
                    <div class="flex items-center">
                        <span class="material-symbols-outlined mr-2">error</span>
                        <p>Failed to create certificates. Please try again.</p>
                    </div>
                `,document.body.appendChild(o),setTimeout(()=>{o.classList.add("opacity-0","transition-opacity","duration-500"),setTimeout(()=>o.remove(),500)},5e3),console.error("Error creating certificate template:",s)}})};return e.jsxs(F,{children:[e.jsx(A,{title:"Certificate Builder",children:e.jsx("style",{children:C})}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6 border border-gray-200",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("h1",{className:"text-xl font-semibold text-gray-800",children:[l?"Create Participation Certificates":"Create Winner Certificates",n&&!l&&" for Teams"]}),e.jsx("div",{className:"px-3 py-1 rounded-full text-sm font-medium bg-orange-100 text-orange-700 border border-orange-200",children:l?"For All Participants":n?"For Selected Teams":"For Selected Winners"})]}),e.jsxs("form",{onSubmit:N,children:[e.jsx("input",{type:"hidden",name:"is_participant_template",value:l}),e.jsxs("div",{className:"mb-8 relative w-full aspect-[1.414] bg-white rounded-lg overflow-hidden",children:[e.jsx("img",{src:"/images/Certificate.png",className:"absolute inset-0 w-full h-full object-cover",alt:"Certificate Background",onError:t=>{console.error("Failed to load certificate background"),t.target.style.display="none",t.target.parentElement.style.backgroundColor="#f8f8f8"}}),e.jsx("div",{style:{position:"absolute",left:`${a.layout_settings.titlePosition.x}%`,top:`${a.layout_settings.titlePosition.y}%`,transform:"translate(-50%, -50%)",fontSize:`${a.layout_settings.titleFontSize}px`,fontWeight:a.layout_settings.titleFontWeight,color:a.layout_settings.titleColor,width:"80%",textAlign:a.layout_settings.titleTextAlign,fontFamily:"'Playfair Display', serif",letterSpacing:"1px",textTransform:"uppercase"},children:a.title||(l?"CERTIFICATE OF PARTICIPATION":"CERTIFICATE OF ACHIEVEMENT")}),e.jsx("div",{style:{position:"absolute",left:`${a.layout_settings.namePosition.x}%`,top:`${a.layout_settings.namePosition.y}%`,transform:"translate(-50%, -50%)",fontSize:`${a.layout_settings.nameFontSize}px`,color:a.layout_settings.nameColor,width:"70%",textAlign:a.layout_settings.nameTextAlign},children:l?"[Student Name]":n?((x=i==null?void 0:i[0])==null?void 0:x.name)||((u=i==null?void 0:i[0])==null?void 0:u.team_name)||"[Team Name]":((y=r==null?void 0:r[0])==null?void 0:y.name)||"[Winner Name]"}),e.jsx("div",{style:{position:"absolute",left:`${a.layout_settings.bodyPosition.x}%`,top:`${a.layout_settings.bodyPosition.y}%`,transform:"translate(-50%, -50%)",fontSize:`${a.layout_settings.bodyFontSize}px`,color:a.layout_settings.bodyColor,width:"80%",textAlign:a.layout_settings.bodyTextAlign},children:a.body_text||(l?"for participating in the event":n?"for outstanding team achievement in the event":"for outstanding achievement in the event")}),c.signature&&e.jsx("div",{style:{position:"absolute",left:`${a.layout_settings.signaturePosition.x}%`,top:`${a.layout_settings.signaturePosition.y}%`,transform:"translate(-50%, -50%)",width:`${a.layout_settings.signatureWidth}px`},children:e.jsx("img",{src:c.signature,className:"w-full h-auto",alt:"Signature"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx("input",{type:"text",value:a.title,onChange:t=>m("title",t.target.value),placeholder:l?"CERTIFICATE OF PARTICIPATION":"CERTIFICATE OF ACHIEVEMENT",className:"mt-1 block w-full rounded-md bg-orange-50 border-orange-300 text-gray-800 focus:border-orange-500 focus:ring-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Signature Image"}),e.jsx("input",{type:"file",onChange:t=>j("signature_image",t.target.files[0]),className:"mt-1 block w-full text-gray-600",accept:"image/*"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Body Text"}),e.jsx("textarea",{value:a.body_text,onChange:t=>m("body_text",t.target.value),rows:4,className:"mt-1 block w-full rounded-md bg-orange-50 border-orange-300 text-gray-800 focus:border-orange-500 focus:ring-orange-500",placeholder:l?"for participating in the event":n?"for outstanding team achievement in the event":"for outstanding achievement in the event"})]})]}),!l&&n&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Selected Teams"}),e.jsx("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:(d==null?void 0:d.length)>0?e.jsx("ul",{className:"space-y-3",children:d.map(t=>e.jsxs("li",{className:"text-gray-700",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:t.name||t.team_name}),a.award_levels[t.id||t.team_id]&&e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${a.award_levels[t.id||t.team_id]==="gold"?"bg-yellow-100 text-yellow-700 border border-yellow-300":a.award_levels[t.id||t.team_id]==="silver"?"bg-gray-100 text-gray-700 border border-gray-300":"bg-amber-100 text-amber-700 border border-amber-300"}`,children:a.award_levels[t.id||t.team_id].charAt(0).toUpperCase()+a.award_levels[t.id||t.team_id].slice(1)})]}),e.jsx("div",{className:"mt-1 ml-4 text-sm text-gray-600",children:t.members?e.jsx("span",{children:t.members.map(s=>s.name).join(", ")}):e.jsxs("span",{children:["(",t.member_count||0," members)"]})})]},t.id||t.team_id))}):e.jsx("p",{className:"text-gray-500",children:"No teams selected"})})]}),!l&&!n&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Selected Winners"}),e.jsx("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:(r==null?void 0:r.length)>0?e.jsx("ul",{className:"space-y-2",children:r.map(t=>e.jsx("li",{className:"text-gray-700",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:t.name}),a.award_levels[t.id]&&e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${a.award_levels[t.id]==="gold"?"bg-yellow-100 text-yellow-700 border border-yellow-300":a.award_levels[t.id]==="silver"?"bg-gray-100 text-gray-700 border border-gray-300":"bg-amber-100 text-amber-700 border border-amber-300"}`,children:a.award_levels[t.id].charAt(0).toUpperCase()+a.award_levels[t.id].slice(1)})]})},t.id))}):e.jsx("p",{className:"text-gray-500",children:"No winners selected"})})]}),!l&&!n&&e.jsx("input",{type:"hidden",name:"selected_users",value:JSON.stringify(r.map(t=>t.id))}),!l&&n&&e.jsx("input",{type:"hidden",name:"selected_teams",value:JSON.stringify(i.map(t=>t.id||t.team_id))}),!l&&e.jsx("input",{type:"hidden",name:"award_levels",value:JSON.stringify(a.award_levels)}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[e.jsx("a",{href:route("events.my-events"),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors",children:g?"Creating...":`Create ${l?"Participation":n?"Team Winner":"Winner"} Certificates`})]})]})]})})})]})}const O=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"}));export{O as _};
