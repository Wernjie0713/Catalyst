import{j as e,r as l}from"./index-D3Bj6weo.js";import{S as C,a as N,L as je}from"./index.esm-CYkcvaz4.js";import{A as Ne}from"./AuthenticatedLayout-DQMJ2exn.js";import{D as we}from"./DisplayProfilePhoto-FZSZ12eh.js";import{m as i}from"./proxy-0rKmIGA_.js";import{z as k}from"./transition-dgGWWUwo.js";import{y as M}from"./dialog-Db2lgBmZ.js";import{A as I}from"./index-IFTv2SK_.js";import{M as Ce}from"./Modal-BIwpINXw.js";import"./index-CfYVbadh.js";function J({friend:s,otherUser:n,photoPath:a,isRequestReceiver:c,onAccept:p,onReject:o,compact:r=!1}){const h=()=>{C.visit(route("profile.view",{user:n.id}))};return e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},onClick:h,className:`relative group ${r?"p-3":"p-6"} bg-gradient-to-br from-gray-800/50 via-gray-900/50 to-gray-950/50 rounded-xl backdrop-blur-sm border border-white/5 hover:border-white/10 transition-all duration-300 cursor-pointer`,children:[e.jsx("div",{className:"absolute inset-0 bg-grid-white/[0.02] bg-[size:20px_20px] rounded-2xl "}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 via-transparent to-blue-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-2xl "}),e.jsxs("div",{className:`relative flex flex-col items-center space-y-4 ${r?"gap-3":"gap-4"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -inset-2 bg-gradient-to-br from-purple-500/20 to-blue-500/20 rounded-full blur-md opacity-0 group-hover:opacity-100 transition-opacity duration-300 "}),e.jsx("div",{className:"relative w-24 h-24 rounded-full overflow-hidden ",children:e.jsx(we,{profilePhotoPath:a,className:"w-full h-full object-cover"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:`text-lg font-medium text-white group-hover:text-purple-200 transition-colors duration-300 truncate max-w-[200px] ${r?"text-sm":""}`,children:n==null?void 0:n.name}),e.jsx("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors duration-300 ",children:n==null?void 0:n.email})]}),s.status==="pending"&&c&&e.jsxs("div",{className:"flex justify-center space-x-2",onClick:x=>x.stopPropagation(),children:[e.jsx(i.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>p(s.id),className:"px-4 py-2 bg-gradient-to-r from-blue-500/20 to-purple-600/20 hover:from-blue-500/30 hover:to-purple-600/30 text-white rounded-xl text-sm border border-white/10 hover:border-white/20 transition-all duration-200 ",children:"Accept"}),e.jsx(i.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o(s.id),className:"px-4 py-2 bg-gradient-to-r from-red-500/20 to-pink-600/20 hover:from-red-500/30 hover:to-pink-600/30 text-white rounded-xl text-sm border border-white/10 hover:border-white/20 transition-all duration-200 ",children:"Reject"})]})]})]})}function Se({activeTab:s,onTabChange:n,userRelations:a}){const c=a==null?void 0:a.isStudent;return e.jsxs("div",{className:"flex space-x-4 mb-6 justify-center",children:[e.jsx("button",{onClick:()=>n("all"),className:`px-4 py-2 rounded-lg transition-all duration-200 ${s==="all"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"text-gray-400 hover:text-gray-300"}`,children:"All Friends"}),c&&e.jsx("button",{onClick:()=>n("mentors"),className:`px-4 py-2 rounded-lg transition-all duration-200 ${s==="mentors"?"bg-green-500/20 text-green-400 border border-green-500/30":"text-gray-400 hover:text-gray-300"}`,children:"Find Mentors"}),e.jsx("button",{onClick:()=>n("teams"),className:`px-4 py-2 rounded-lg transition-all duration-200 ${s==="teams"?"bg-purple-500/20 text-purple-400 border border-purple-500/30":"text-gray-400 hover:text-gray-300"}`,children:"Teams"})]})}function B({icon:s="group",message:n,description:a}){return e.jsx("div",{className:"bg-gradient-to-br from-gray-800/30 via-gray-900/30 to-gray-950/30 rounded-xl p-6 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl text-gray-500 mb-2",children:s}),e.jsx("p",{className:"text-gray-400",children:n}),a&&e.jsx("p",{className:"text-gray-500 text-sm",children:a})]})})}function G({value:s,onChange:n,placeholder:a="Search friends by name..."}){return e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400",children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"search"})}),e.jsx("input",{type:"text",value:s,onChange:c=>n(c.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-800/50 border border-white/5 rounded-lg text-gray-300 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/20",placeholder:a})]})})}function Te({isOpen:s,onClose:n,friends:a,onTeamCreated:c,auth:p}){const[o,r]=l.useState(""),[h,x]=l.useState([]),[m,g]=l.useState({}),[b,f]=l.useState(!1),S=async u=>{var j,y;u.preventDefault(),g({}),f(!0);try{const v=await N.post(route("teams.store"),{name:o,members:h});v.data.success&&(c(v.data.team),r(""),x([]),n())}catch(v){g(((y=(j=v.response)==null?void 0:j.data)==null?void 0:y.errors)||{general:"Failed to create team"})}finally{f(!1)}};return e.jsx(k,{appear:!0,show:s,as:l.Fragment,children:e.jsxs(M,{as:"div",className:"relative z-50",onClose:n,children:[e.jsx(k.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(k.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(M.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-gradient-to-br from-gray-800/80 via-gray-900/90 to-gray-950/95 p-6 text-left align-middle shadow-xl transition-all border border-white/10",children:[e.jsx(M.Title,{as:"h3",className:"text-lg font-medium leading-6 text-white mb-4",children:"Create a New Team"}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"teamName",className:"block text-sm font-medium text-gray-400 mb-2",children:"Team Name"}),e.jsx("input",{type:"text",id:"teamName",value:o,onChange:u=>r(u.target.value),className:"w-full px-3 py-2 bg-gray-800/50 border border-white/10 rounded-lg text-white focus:ring-2 focus:ring-purple-500/30 focus:border-purple-500/60",placeholder:"Enter team name"}),m.name&&e.jsx("p",{className:"mt-1 text-sm text-red-400",children:m.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Select Members"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:a.map(u=>e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-800/30 rounded-lg",children:[e.jsx("input",{type:"checkbox",id:`friend-${u.id}`,value:u.id,checked:h.includes(u.id),onChange:j=>{j.target.checked?x([...h,u.id]):x(h.filter(y=>y!==u.id))},className:"rounded border-gray-700 text-purple-500 focus:ring-purple-500/30 bg-gray-800"}),e.jsx("label",{htmlFor:`friend-${u.id}`,className:"text-white",children:u.name})]},u.id))}),m.friends&&e.jsx("p",{className:"mt-1 text-sm text-red-400",children:m.friends})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-lg bg-gray-800/50 text-white text-sm hover:bg-gray-800/70 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:b||!o||h.length===0,className:"px-4 py-2 rounded-lg bg-purple-500/20 text-purple-400 text-sm hover:bg-purple-500/30 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Creating...":"Create Team"})]})]})]})})})})]})})}function _e({team:s,status:n,isInvited:a,onAccept:c,onReject:p,onClick:o}){var r;return s?e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative group",children:e.jsxs("div",{className:"relative p-6 bg-gradient-to-br from-gray-800/80 via-gray-900/90 to-gray-950/95 rounded-2xl backdrop-blur-md border border-white/5 hover:border-white/10 transition-all duration-300",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-white/[0.02] bg-[size:20px_20px] rounded-2xl"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 via-transparent to-blue-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-2xl"}),e.jsxs("div",{className:"relative flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -inset-2 bg-gradient-to-br from-purple-500/20 to-blue-500/20 rounded-full blur-md opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-700/50 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-3xl text-gray-400",children:"group"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-white group-hover:text-purple-200 transition-colors duration-300",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-400 group-hover:text-gray-300 transition-colors duration-300",children:["Created by: ",(r=s.creator)==null?void 0:r.name]}),e.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Members: ",s.member_count]})]}),n==="pending"&&a?e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("button",{onClick:c,className:"px-4 py-2 bg-blue-500/20 hover:bg-blue-500/30 text-white rounded-lg",children:"Accept"}),e.jsx("button",{onClick:p,className:"px-4 py-2 bg-red-500/20 hover:bg-red-500/30 text-white rounded-lg",children:"Reject"})]}):e.jsx("button",{onClick:o,className:"w-full px-4 py-2 bg-purple-500/20 hover:bg-purple-500/30 text-white rounded-lg",children:"View Details"})]})]})}):null}function ke({isOpen:s,onClose:n,team:a,onDelete:c,onRemoveMember:p,onAddMember:o,auth:r}){if(!a)return null;const h=a.members.filter(m=>m.status==="accepted"&&m.user_id!==a.creator_id),x=h.length+1;return e.jsx(k,{appear:!0,show:s,as:l.Fragment,children:e.jsxs(M,{as:"div",className:"relative z-50",onClose:n,children:[e.jsx(k.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(k.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(M.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-gradient-to-br from-gray-800/80 via-gray-900/90 to-gray-950/95 p-6 text-left align-middle shadow-xl transition-all border border-white/10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Team Details"}),(a==null?void 0:a.creator_id)===r.user.id&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>o(a),className:"text-emerald-400 hover:text-emerald-300 transition-colors",title:"Add Member",children:e.jsx("span",{className:"material-symbols-outlined",children:"person_add"})}),e.jsx("button",{onClick:()=>c(a.id),className:"text-red-400 hover:text-red-300 transition-colors",title:"Delete Team",children:e.jsx("span",{className:"material-symbols-outlined",children:"delete"})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"Team Name"}),e.jsx("div",{className:"bg-gradient-to-r from-gray-800/50 to-gray-900/50 p-3 rounded-lg border border-white/5",children:e.jsx("p",{className:"text-lg text-white font-medium",children:a.name})}),e.jsxs("div",{className:"mt-2 text-sm text-gray-400 flex items-center",children:[e.jsx("span",{className:"material-symbols-outlined text-sm mr-1",children:"group"}),"Total Members: ",x]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"Team Leader"}),e.jsx("div",{className:"bg-gradient-to-r from-gray-800/50 to-gray-900/50 p-3 rounded-lg border border-white/5",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"material-symbols-outlined text-yellow-500",children:"star"}),e.jsx("p",{className:"text-white",children:a.creator.name})]})})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:["Team Members (",h.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2 custom-scrollbar",children:h.map(m=>{var g;return e.jsxs("div",{className:"bg-gradient-to-r from-gray-800/50 to-gray-900/50 p-3 rounded-lg border border-white/5 flex items-center justify-between",children:[e.jsx("span",{className:"text-white",children:m.user.name}),a.creator_id===((g=r==null?void 0:r.user)==null?void 0:g.id)&&m.user_id!==a.creator_id&&e.jsx("button",{onClick:()=>{confirm("Are you sure you want to remove this member from the team?")&&p(a.id,m.user_id)},className:"text-red-400 hover:text-red-500 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"remove_circle"})})]},m.id)})})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{type:"button",className:"px-4 py-2 rounded-lg bg-white/5 hover:bg-white/10 text-white text-sm font-medium transition-colors duration-200 border border-white/10",onClick:n,children:"Close"})})]})})})})]})})}function Me({invitation:s}){const n=async()=>{try{await N.post(route("teams.accept-invitation",s.team.id)),window.location.reload()}catch(c){console.error("Error accepting invitation:",c)}},a=async()=>{try{await N.post(route("teams.reject-invitation",s.team.id)),window.location.reload()}catch(c){console.error("Error rejecting invitation:",c)}};return e.jsx("div",{className:"bg-gradient-to-br from-gray-800/50 via-gray-900/50 to-gray-950/50 rounded-xl p-6 backdrop-blur-sm border border-white/5",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-700/50 flex items-center justify-center mb-4",children:e.jsx("span",{className:"material-symbols-outlined text-3xl text-gray-400",children:"group"})}),e.jsx("h3",{className:"text-xl font-medium text-white mb-1",children:s.team.name}),e.jsxs("p",{className:"text-gray-400 text-sm mb-4",children:["Created by: ",s.team.creator.name]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(i.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:n,className:"px-4 py-2 bg-green-500/20 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors duration-200",children:"Accept"}),e.jsx(i.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:a,className:"px-4 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors duration-200",children:"Reject"})]})]})})}function Fe({isOpen:s,onClose:n,friendRequests:a,onAccept:c,onReject:p,getOtherUser:o,getProfilePhotoPath:r,isRequestReceiver:h,auth:x}){const m=l.useRef(null);return l.useEffect(()=>{const g=b=>{m.current&&!m.current.contains(b.target)&&n()};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[n]),e.jsx(I,{children:s&&e.jsx(i.div,{ref:m,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute right-0 mt-2 w-96 bg-gradient-to-br from-gray-800/95 via-gray-900/95 to-gray-950/95 rounded-xl shadow-lg border border-white/10 backdrop-blur-xl z-50",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Incoming Friend Requests"}),e.jsxs("span",{className:"bg-blue-500/20 text-blue-400 px-2 py-1 rounded-full text-xs",children:[a.length," pending"]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:a.length>0?a.map(g=>e.jsx(J,{friend:g,otherUser:o(g),photoPath:r(o(g)),isRequestReceiver:h(g),onAccept:c,onReject:p,compact:!0},`friend-${g.id}`)):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl text-gray-500 mb-2",children:"person_off"}),e.jsx("p",{className:"text-gray-400",children:"No friend requests yet"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"When someone adds you, their request will appear here"})]})})]})})})}function qe({isOpen:s,onClose:n,pendingInvitations:a,onAccept:c,onReject:p}){const o=l.useRef(null);return l.useEffect(()=>{const r=h=>{o.current&&!o.current.contains(h.target)&&n()};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[n]),e.jsx(I,{children:s&&e.jsx(i.div,{ref:o,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute right-0 mt-2 w-96 bg-gradient-to-br from-gray-800/95 via-gray-900/95 to-gray-950/95 rounded-xl shadow-lg border border-white/10 backdrop-blur-xl z-50",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Team Invitations"}),e.jsxs("span",{className:"bg-blue-500/20 text-blue-400 px-2 py-1 rounded-full text-xs",children:[a.length," pending"]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:a.length>0?a.map(r=>e.jsx(Me,{invitation:r,onAccept:()=>c(r.team_id),onReject:()=>p(r.team_id),compact:!0},r.id)):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl text-gray-500 mb-2",children:"groups"}),e.jsx("p",{className:"text-gray-400",children:"No team invitations"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"When someone invites you to a team, it will appear here"})]})})]})})})}function Re({isOpen:s,onClose:n,team:a,onSuccess:c}){const[p,o]=l.useState([]),[r,h]=l.useState(""),[x,m]=l.useState(!1),[g,b]=l.useState("");l.useEffect(()=>{s&&a&&f()},[s,a]);const f=async()=>{var u,j;try{const y=await N.get(route("teams.available-friends",a.id));Array.isArray(y.data)&&y.data.length===0?b("No available friends found. They might all be in the team already."):Array.isArray(y.data)?(o(y.data),b("")):b("Invalid response format from server")}catch(y){b(((j=(u=y.response)==null?void 0:u.data)==null?void 0:j.message)||"Failed to load available friends"),o([])}},S=async u=>{var j,y;if(u.preventDefault(),!!r){m(!0),b("");try{await N.post(route("teams.add-member"),{team_id:a.id,user_id:r}),c()}catch(v){console.error("Error adding member:",v),b(((y=(j=v.response)==null?void 0:j.data)==null?void 0:y.message)||"Failed to add member")}finally{m(!1)}}};return e.jsx(Ce,{show:s,onClose:n,maxWidth:"sm",children:e.jsx("div",{className:"bg-[#1a1f2e] rounded-lg",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Add to Team"})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Team Name"}),e.jsx("div",{className:"bg-[#12151f] p-2.5 rounded-md",children:e.jsx("p",{className:"text-white",children:a==null?void 0:a.name})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Select Friend"}),e.jsx("div",{className:"relative",children:e.jsxs("select",{value:r,onChange:u=>h(u.target.value),className:"w-full bg-[#12151f] text-white p-2.5 rounded-md border border-gray-700/50 focus:border-blue-500/50 focus:ring-0",required:!0,children:[e.jsx("option",{value:"",className:"bg-[#12151f]",children:"Choose a friend"}),p.map(u=>e.jsx("option",{value:u.id,className:"bg-[#12151f]",children:u.name},u.id))]})})]}),g&&e.jsx("div",{className:"mb-4 text-sm text-red-400 bg-red-500/10 p-2 rounded-md",children:g}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(i.button,{type:"button",onClick:n,whileHover:{scale:1.02},whileTap:{scale:.98},className:"px-4 py-2 bg-[#12151f] text-white rounded-md hover:bg-[#1a1f2e] transition-colors",children:"Close"}),e.jsx(i.button,{onClick:S,disabled:x||!r,whileHover:{scale:1.02},whileTap:{scale:.98},className:`px-4 py-2 bg-[#12151f] text-white rounded-md hover:bg-[#1a1f2e] transition-colors ${x||!r?"opacity-50 cursor-not-allowed":""}`,children:x?"Adding...":"Add to Team"})]})]})})})}function Ae({lecturer:s,onRequestMentor:n}){const a=o=>{switch(o){case"pending":return"bg-yellow-100 text-yellow-800";case"accepted":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},c=o=>{switch(o){case"pending":return"Request Pending";case"accepted":return"Your Mentor";case"rejected":return"Request Rejected";default:return"Request Mentor"}},p=!s.request_status||s.request_status==="rejected";return e.jsxs(i.div,{className:"bg-gradient-to-br from-gray-800/30 via-gray-900/30 to-gray-950/30 rounded-xl p-6 border border-white/10 hover:border-white/20 transition-all duration-300",whileHover:{y:-2},layout:!0,children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"relative",children:s.profile_photo_path?e.jsx("img",{src:`/storage/${s.profile_photo_path}`,alt:s.name,className:"w-12 h-12 rounded-full object-cover border-2 border-white/20"}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-medium text-lg",children:s.name.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:s.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:s.email})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-400 mr-2 text-lg",children:"domain"}),e.jsx("span",{className:"text-gray-300",children:s.department})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-purple-400 mr-2 text-lg",children:"psychology"}),e.jsx("span",{className:"text-gray-300",children:s.specialization})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-green-400 mr-2 text-lg",children:"work_history"}),e.jsxs("span",{className:"text-gray-300",children:[s.experience_years," years experience"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[s.request_status&&e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${a(s.request_status)}`,children:c(s.request_status)}),p&&e.jsxs(i.button,{onClick:()=>n(s),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-gradient-to-r from-blue-500/20 to-purple-600/20 hover:from-blue-500/30 hover:to-purple-600/30 text-white rounded-lg text-sm border border-white/10 hover:border-white/20 transition-all duration-200 flex items-center space-x-2",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"person_add"}),e.jsx("span",{children:"Request Mentor"})]})]})]})}function Le({isOpen:s,onClose:n,lecturer:a,onSubmit:c}){const[p,o]=l.useState(""),[r,h]=l.useState(!1),x=async b=>{b.preventDefault(),h(!0);try{await c(p),o("")}catch(f){console.error("Error submitting mentor request:",f)}finally{h(!1)}},m={hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}},g={hidden:{scale:.95,opacity:0},visible:{scale:1,opacity:1,transition:{type:"spring",stiffness:300,damping:30}},exit:{scale:.95,opacity:0,transition:{duration:.2}}};return a?e.jsx(I,{children:s&&e.jsxs(i.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4",variants:m,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsx(i.div,{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(i.div,{className:"relative bg-gradient-to-br from-gray-800 via-gray-900 to-gray-950 rounded-2xl p-6 w-full max-w-lg border border-white/10 shadow-2xl",variants:g,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Request Mentorship"}),e.jsx(i.button,{onClick:n,whileHover:{scale:1.1},whileTap:{scale:.9},className:"text-gray-400 hover:text-white transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-xl",children:"close"})})]}),e.jsxs("div",{className:"flex items-center space-x-4 mb-6 p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("div",{className:"relative",children:a.profile_photo_path?e.jsx("img",{src:`/storage/${a.profile_photo_path}`,alt:a.name,className:"w-16 h-16 rounded-full object-cover border-2 border-white/20"}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-medium text-xl",children:a.name.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:a.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:a.department}),e.jsx("p",{className:"text-gray-400 text-sm",children:a.specialization})]})]}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-medium mb-2",children:"Message (Optional)"}),e.jsx("textarea",{value:p,onChange:b=>o(b.target.value),placeholder:"Tell the lecturer why you'd like them as your mentor...",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all duration-200 resize-none",rows:"4",maxLength:"500"}),e.jsxs("p",{className:"text-gray-400 text-xs mt-1",children:[p.length,"/500 characters"]})]}),e.jsxs("div",{className:"flex space-x-3 pt-2",children:[e.jsx(i.button,{type:"button",onClick:n,whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1 px-4 py-3 bg-gray-600/20 hover:bg-gray-600/30 text-gray-300 rounded-lg transition-all duration-200 border border-gray-600/30 hover:border-gray-600/50",children:"Cancel"}),e.jsx(i.button,{type:"submit",disabled:r,whileHover:{scale:r?1:1.02},whileTap:{scale:r?1:.98},className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:"Sending..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"send"}),e.jsx("span",{children:"Send Request"})]})})]})]})]})]})}):null}function Ee({auth:s,friends:n=[],teams:a=[],pendingInvitations:c=[],can:p,userRelations:o}){const[r,h]=l.useState(()=>{const t=new URL(window.location.href).searchParams.get("tab")||"all";return!p.team_grouping&&t==="teams"?"all":t}),[x,m]=l.useState(""),[g,b]=l.useState(!1),[f,S]=l.useState(a),[u,j]=l.useState(null),[y,v]=l.useState(!1),[K,X]=l.useState(!1),[Z,F]=l.useState(!1),[O,ie]=l.useState([]),[U,$]=l.useState(!1),[ne,P]=l.useState(null),[ee,le]=l.useState([]),[te,H]=l.useState(!1),[q,z]=l.useState(null),oe={initial:{opacity:0},animate:{opacity:1,transition:{duration:.5,when:"beforeChildren",staggerChildren:.1}}},R={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08,delayChildren:.1}}},A={hidden:{opacity:0,y:20},visible:t=>({opacity:1,y:0,transition:{delay:t*.05,duration:.4,ease:"easeOut"}}),hover:{y:-5,boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.2)",transition:{duration:.2}}},se={hover:{scale:1.05,transition:{duration:.2}},tap:{scale:.95,transition:{duration:.1}}},L={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.4,ease:[.25,.1,.25,1],when:"beforeChildren"}}},E={hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1,transition:{delay:.1,duration:.4,type:"spring",stiffness:100}}};l.useEffect(()=>{r==="teams"&&p.team_grouping&&f.length===0&&T()},[r]);const T=async()=>{try{const t=await N.get(route("teams.index"));S(t.data.teams),ie(t.data.pendingInvitations)}catch(t){console.error("Error fetching teams:",t)}},de=t=>{S(d=>[...d,t]),b(!1)},D=t=>{C.post(route("friend.accept",t),{},{preserveScroll:!0})},V=t=>{C.post(route("friend.reject",t),{},{preserveScroll:!0})},ae=n.filter(t=>r==="all"?!0:r==="pending"?t.status==="pending":r==="teams"?t.status==="accepted":!0),W=t=>t.friend_id===s.user.id,_=t=>t.user_id===s.user.id?t.friend:t.user,Y=t=>t?t.student?t.student.profile_photo_path:t.lecturer?t.lecturer.profile_photo_path:t.department_staff?t.department_staff.profile_photo_path:t.organizer?t.organizer.profile_photo_path:null:null,ce=n.filter(t=>t.status==="accepted").map(t=>{const d=_(t);return{id:d.id,name:d.name,email:d.email}});[...n.filter(t=>t.status==="pending"),...f.filter(t=>t.members.some(d=>d.user_id===s.user.id&&d.status==="pending"))];const me=t=>{j(t),v(!0)},ue=async t=>{try{await N.delete(route("teams.destroy",t)),v(!1),C.visit(route("friends.list",{tab:"teams"}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{T()}})}catch(d){console.error("Error deleting team:",d),alert("Failed to delete team")}},Q=n.filter(t=>t.status==="pending"&&t.friend_id===s.user.id),xe=async t=>{try{await N.post(route("teams.accept-invitation",t)),F(!1),C.visit(route("friends.list",{tab:"teams"}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{T()}})}catch(d){console.error("Error accepting team invitation:",d)}},pe=async t=>{try{await N.post(route("teams.reject-invitation",t)),F(!1),C.visit(route("friends.list",{tab:"teams"}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{T()}})}catch(d){console.error("Error rejecting team invitation:",d)}},he=async(t,d)=>{try{await N.delete(route("teams.remove-member",{teamId:t,userId:d})),v(!1),C.visit(route("friends.list",{tab:"teams"}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{T()}})}catch(w){console.error("Error removing team member:",w),alert("Failed to remove team member")}},ge=t=>{P(t),$(!0),v(!1)},be=()=>{$(!1),P(null),C.visit(route("friends.list",{tab:"teams"}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{T()}})};l.useEffect(()=>{r==="mentors"&&(o!=null&&o.isStudent)&&re()},[r]);const re=async()=>{try{const t=await N.get(route("lecturers.list"));le(t.data)}catch(t){console.error("Error fetching lecturers:",t)}},ye=t=>{z(t),H(!0)},ve=async t=>{var d;try{console.log("Submitting mentor request:",{lecturerId:q.id,message:t,route:route("mentor.request",q.id)});const w=await N.post(route("mentor.request",q.id),{message:t});console.log("Mentor request response:",w),H(!1),z(null),re()}catch(w){console.error("Error sending mentor request:",w),console.error("Error response:",(d=w.response)==null?void 0:d.data)}};return e.jsxs(Ne,{user:s.user,children:[e.jsx(je,{title:"Connections"}),e.jsx(i.div,{className:"py-12",initial:"initial",animate:"animate",variants:oe,children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx(i.div,{className:"bg-gradient-to-br from-gray-800/50 via-gray-900/50 to-gray-950/50 rounded-2xl backdrop-blur-sm border border-white/5",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("div",{className:"p-6",children:[e.jsx(Se,{activeTab:r,onTabChange:h,userRelations:o}),r!=="teams"&&r!=="mentors"&&e.jsxs(i.div,{className:"flex items-center justify-between mb-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2,duration:.4},children:[e.jsx("div",{className:"flex-1",children:e.jsx(G,{value:x,onChange:m})}),e.jsxs("div",{className:"relative ml-4",children:[e.jsxs(i.button,{onClick:()=>X(!K),whileHover:{scale:1.02},whileTap:{scale:.98},className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500/20 to-purple-600/20 hover:from-blue-500/30 hover:to-purple-600/30 text-white rounded-lg text-sm border border-white/10 hover:border-white/20 transition-all duration-200",children:[e.jsx("span",{className:"material-symbols-outlined text-sm mr-2",children:"person_add"}),"Friend Requests",Q.length>0&&e.jsx(i.span,{className:"ml-2 bg-red-500/30 px-2 py-0.5 rounded-full text-xs",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:400,damping:10},children:Q.length})]}),e.jsx(Fe,{isOpen:K,onClose:()=>X(!1),friendRequests:Q,onAccept:D,onReject:V,getOtherUser:_,getProfilePhotoPath:Y,isRequestReceiver:W,auth:s})]})]}),e.jsx(I,{mode:"sync",children:r==="mentors"?e.jsxs(i.div,{initial:"hidden",animate:"visible",variants:L,className:"overflow-hidden",children:[e.jsx(i.div,{className:"mb-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},children:e.jsx(G,{value:x,onChange:m,placeholder:"Search lecturers by name, department, or specialization..."})}),e.jsxs(i.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",variants:R,children:[ee.filter(t=>t.name.toLowerCase().includes(x.toLowerCase())||t.department.toLowerCase().includes(x.toLowerCase())||t.specialization.toLowerCase().includes(x.toLowerCase())).map((t,d)=>e.jsx(i.div,{custom:d,variants:A,whileHover:"hover",children:e.jsx(Ae,{lecturer:t,onRequestMentor:()=>ye(t)})},t.id)),ee.length===0&&e.jsx(i.div,{className:"col-span-full",variants:E,children:e.jsx(B,{icon:"school",message:"No lecturers available",description:"Check back later for available mentors"})})]})]},"mentors"):r==="teams"?e.jsxs(i.div,{initial:"hidden",animate:"visible",variants:L,className:"overflow-hidden",children:[e.jsxs(i.div,{className:"flex items-center justify-between mb-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},children:[e.jsx("div",{className:"flex-1",children:e.jsx(G,{value:x,onChange:m,placeholder:"Search teams by name..."})}),e.jsxs("div",{className:"flex gap-4 ml-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(i.button,{onClick:()=>F(!Z),whileHover:"hover",whileTap:"tap",variants:se,className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-orange-500/20 to-red-600/20 hover:from-orange-500/30 hover:to-red-600/30 text-white rounded-lg text-sm border border-white/10 hover:border-white/20 transition-all duration-200",children:[e.jsx("span",{className:"material-symbols-outlined text-sm mr-2",children:"mail"}),"Team Invitations",O.length>0&&e.jsx(i.span,{className:"ml-2 bg-red-500/30 px-2 py-0.5 rounded-full text-xs",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:400,damping:10},children:O.length})]}),e.jsx(qe,{isOpen:Z,onClose:()=>F(!1),pendingInvitations:O,onAccept:xe,onReject:pe,auth:s})]}),e.jsxs(i.button,{onClick:()=>b(!0),whileHover:"hover",whileTap:"tap",variants:se,className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500/20 to-purple-600/20 hover:from-blue-500/30 hover:to-purple-600/30 text-white rounded-lg text-sm border border-white/10 hover:border-white/20 transition-all duration-200",children:[e.jsx("span",{className:"material-symbols-outlined text-sm mr-2",children:"group_add"}),"Create Team"]})]})]}),e.jsxs(i.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",variants:R,children:[f.filter(t=>t.name.toLowerCase().includes(x.toLowerCase())).map((t,d)=>e.jsx(i.div,{custom:d,variants:A,whileHover:"hover",children:e.jsx(_e,{team:t,status:"accepted",onClick:()=>me(t)})},t.id)),f.length===0&&e.jsx(i.div,{className:"col-span-full",variants:E,children:e.jsx(B,{icon:"groups",message:"No teams yet",description:"Create a team to start collaborating with others"})})]})]},"teams"):r==="pending"?e.jsx(i.div,{initial:"hidden",animate:"visible",variants:L,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 overflow-hidden",children:e.jsxs(i.div,{variants:R,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 col-span-full",children:[n.filter(t=>t.status==="pending").map((t,d)=>e.jsx(i.div,{custom:d,variants:A,whileHover:"hover",children:e.jsx(J,{friend:t,otherUser:_(t),photoPath:Y(_(t)),isRequestReceiver:W(t),onAccept:D,onReject:V})},`friend-${t.id}`)),!n.some(t=>t.status==="pending")&&e.jsx(i.div,{className:"col-span-full",variants:E,children:e.jsx(B,{message:"No pending friend requests"})})]})},"pending"):e.jsx(i.div,{initial:"hidden",animate:"visible",variants:L,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 overflow-hidden",children:e.jsxs(i.div,{variants:R,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 col-span-full",children:[ae.filter(t=>t.status==="accepted").filter(t=>_(t).name.toLowerCase().includes(x.toLowerCase())).map((t,d)=>{const w=_(t),fe=Y(w);return e.jsx(i.div,{custom:d,variants:A,whileHover:"hover",children:e.jsx(J,{friend:t,otherUser:w,photoPath:fe,isRequestReceiver:W(t),onAccept:D,onReject:V,teams:f})},t.id)}),ae.filter(t=>t.status==="accepted").length===0&&e.jsx(i.div,{className:"col-span-full",variants:E,children:e.jsx(i.div,{className:"bg-gradient-to-br from-gray-800/30 via-gray-900/30 to-gray-950/30 rounded-xl p-6 text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},children:e.jsxs(i.div,{className:"flex flex-col items-center justify-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3,duration:.5,type:"spring",stiffness:100},children:[e.jsx(i.span,{className:"material-symbols-outlined text-4xl text-gray-500 mb-2",initial:{rotateY:90},animate:{rotateY:0},transition:{delay:.4,duration:.6,type:"spring"},children:"group"}),e.jsx(i.p,{className:"text-gray-400",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.5},children:"No friends added yet"}),e.jsx(i.p,{className:"text-gray-500 text-sm",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.5},children:"Start by adding friends to your network"})]})})})]})},"all")})]})})})}),p.team_grouping&&e.jsx(Te,{isOpen:g,onClose:()=>b(!1),friends:ce,onTeamCreated:de,auth:s}),e.jsx(ke,{isOpen:y,onClose:()=>v(!1),team:u,onDelete:ue,onRemoveMember:he,onAddMember:ge,auth:s}),U&&e.jsx(Re,{isOpen:U,onClose:()=>{$(!1),P(null)},team:ne,onSuccess:be}),te&&e.jsx(Le,{isOpen:te,onClose:()=>{H(!1),z(null)},lecturer:q,onSubmit:ve})]})}const Qe=Object.freeze(Object.defineProperty({__proto__:null,default:Ee},Symbol.toStringTag,{value:"Module"}));export{Qe as _};
