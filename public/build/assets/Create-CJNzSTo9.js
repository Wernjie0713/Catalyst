import{j as e}from"./index-D3Bj6weo.js";import{m as _,L as y}from"./index.esm-CYkcvaz4.js";import{A as f}from"./AuthenticatedLayout-CETbKJ6G.js";import{I as i}from"./InputError-DflrxOlj.js";import{I as d}from"./InputLabel-C_GyD9ao.js";import{P as b}from"./PrimaryButton-D4gZOhu_.js";import{T as c}from"./TextInput-ClIswWn0.js";import{T as N}from"./TextArea-8YKc5Ae-.js";function w({auth:p,teams:x=[],supervisors:o=[],isTeamLeader:n=!1}){const{data:s,setData:a,post:h,processing:m,errors:r,reset:j}=_({title:"",description:"",type:"individual",priority:"medium",start_date:"",expected_end_date:"",team_id:"",supervisor_id:""}),g=t=>{t.preventDefault(),console.log("Submitting form with data:",s),h(route("projects.store"),{onSuccess:()=>{console.log("Project created successfully"),j()},onError:l=>{console.error("Error creating project:",l)},preserveScroll:!0})},v=t=>{const l=t.target.value;a(u=>({...u,type:l,team_id:l==="individual"?"":u.team_id}))};return e.jsxs(f,{user:p.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Create Project"}),children:[e.jsx(y,{title:"Create Project"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[Object.keys(r).length>0&&e.jsxs("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Error!"}),e.jsx("span",{className:"block sm:inline",children:" Please check the form for errors."})]}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"title",value:"Project Title"}),e.jsx(c,{id:"title",type:"text",name:"title",value:s.title,className:"mt-1 block w-full",onChange:t=>a("title",t.target.value),required:!0}),e.jsx(i,{message:r.title,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"description",value:"Description"}),e.jsx(N,{id:"description",name:"description",value:s.description,className:"mt-1 block w-full",onChange:t=>a("description",t.target.value),required:!0}),e.jsx(i,{message:r.description,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"type",value:"Project Type"}),e.jsxs("select",{id:"type",name:"type",value:s.type,className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",onChange:v,children:[e.jsx("option",{value:"individual",children:"Individual"}),n&&e.jsx("option",{value:"team",children:"Team"})]}),!n&&e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"You need to be a team leader to create team projects."}),e.jsx(i,{message:r.type,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"priority",value:"Priority"}),e.jsxs("select",{id:"priority",name:"priority",value:s.priority,className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",onChange:t=>a("priority",t.target.value),children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"critical",children:"Critical"})]}),e.jsx(i,{message:r.priority,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"start_date",value:"Start Date"}),e.jsx(c,{id:"start_date",type:"date",name:"start_date",value:s.start_date,className:"mt-1 block w-full",onChange:t=>a("start_date",t.target.value),required:!0}),e.jsx(i,{message:r.start_date,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"expected_end_date",value:"Expected End Date"}),e.jsx(c,{id:"expected_end_date",type:"date",name:"expected_end_date",value:s.expected_end_date,className:"mt-1 block w-full",onChange:t=>a("expected_end_date",t.target.value),required:!0}),e.jsx(i,{message:r.expected_end_date,className:"mt-2"})]})]}),s.type==="team"&&n&&e.jsxs("div",{children:[e.jsx(d,{htmlFor:"team_id",value:"Select Team"}),e.jsxs("select",{id:"team_id",name:"team_id",value:s.team_id,className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",onChange:t=>a("team_id",t.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select a team"}),x.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (",t.member_count," members)"]},t.id))]}),e.jsx(i,{message:r.team_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"supervisor_id",value:"Project Supervisor"}),o.length>0?e.jsxs("select",{id:"supervisor_id",name:"supervisor_id",value:s.supervisor_id,className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",onChange:t=>a("supervisor_id",t.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select a supervisor"}),o.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}):e.jsx("p",{className:"mt-1 text-sm text-red-600",children:"No supervisors available. Please contact your administrator."}),e.jsx(i,{message:r.supervisor_id,className:"mt-2"})]}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsx(b,{disabled:m||o.length===0||s.type==="team"&&!s.team_id,className:"ml-4",children:m?"Creating...":"Create Project"})})]})]})})})})]})}const I=Object.freeze(Object.defineProperty({__proto__:null,default:w},Symbol.toStringTag,{value:"Module"}));export{I as _};
