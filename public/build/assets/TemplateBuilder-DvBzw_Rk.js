import{m as v,r as w,j as t,L as S}from"./index.esm-DYHbi2wE.js";import{A as F}from"./AuthenticatedLayout-B8ZFME79.js";const A=`
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap');
`;function C({event:b,selectedUsers:o=[],selectedTeams:i=[],isParticipationCertificate:l=!0,isTeamEvent:s=!1}){var x,u,y;const r=i.reduce((e,a)=>{const m=a.id||a.team_id;return e.find(p=>(p.id||p.team_id)===m)||e.push(a),e},[]),{data:n,setData:d,post:f,processing:g}=v({title:"",body_text:"",signature_image:null,is_participant_template:l,layout_settings:{titlePosition:{x:50,y:25},namePosition:{x:50,y:50},bodyPosition:{x:50,y:60},signaturePosition:{x:50,y:85},titleFontSize:40,nameFontSize:32,bodyFontSize:18,signatureWidth:150,titleColor:"#000000",nameColor:"#333333",bodyColor:"#444444",titleFontWeight:"bold",titleTextAlign:"center",nameTextAlign:"center",bodyTextAlign:"center",fontFamily:"'Playfair Display', serif"},selected_users:l||s?[]:o.map(e=>e.id),selected_teams:l?[]:r.map(e=>e.id||e.team_id)}),[c,j]=w.useState({signature:null}),_=(e,a)=>{if(d(e,a),a){const m=URL.createObjectURL(a);j(h=>({...h,[e.replace("_image","")]:m}))}},N=e=>{e.preventDefault(),f(route("certificates.store",b.event_id),{onSuccess:()=>{console.log("Certificate template created successfully")},onError:a=>{console.error("Error creating certificate template:",a)}})};return t.jsxs(F,{children:[t.jsx(S,{title:"Certificate Builder",children:t.jsx("style",{children:A})}),t.jsx("div",{className:"py-12",children:t.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:t.jsxs("div",{className:"bg-[#18122B] overflow-hidden shadow-sm sm:rounded-lg p-6",children:[t.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[t.jsxs("h1",{className:"text-xl font-semibold text-white",children:[l?"Create Participation Certificates":"Create Winner Certificates",s&&!l&&" for Teams"]}),t.jsx("div",{className:"px-3 py-1 rounded-full text-sm font-medium bg-indigo-600/20 text-indigo-400",children:l?"For All Participants":s?"For Selected Teams":"For Selected Winners"})]}),t.jsxs("form",{onSubmit:N,children:[t.jsx("input",{type:"hidden",name:"is_participant_template",value:l}),t.jsxs("div",{className:"mb-8 relative w-full aspect-[1.414] bg-white rounded-lg overflow-hidden",children:[t.jsx("img",{src:"/images/Certificate.png",className:"absolute inset-0 w-full h-full object-cover",alt:"Certificate Background",onError:e=>{console.error("Failed to load certificate background"),e.target.style.display="none",e.target.parentElement.style.backgroundColor="#f8f8f8"}}),t.jsx("div",{style:{position:"absolute",left:`${n.layout_settings.titlePosition.x}%`,top:`${n.layout_settings.titlePosition.y}%`,transform:"translate(-50%, -50%)",fontSize:`${n.layout_settings.titleFontSize}px`,fontWeight:n.layout_settings.titleFontWeight,color:n.layout_settings.titleColor,width:"80%",textAlign:n.layout_settings.titleTextAlign,fontFamily:"'Playfair Display', serif",letterSpacing:"1px",textTransform:"uppercase"},children:n.title||(l?"CERTIFICATE OF PARTICIPATION":"CERTIFICATE OF ACHIEVEMENT")}),t.jsx("div",{style:{position:"absolute",left:`${n.layout_settings.namePosition.x}%`,top:`${n.layout_settings.namePosition.y}%`,transform:"translate(-50%, -50%)",fontSize:`${n.layout_settings.nameFontSize}px`,color:n.layout_settings.nameColor,width:"70%",textAlign:n.layout_settings.nameTextAlign},children:l?"[Student Name]":s?((x=i==null?void 0:i[0])==null?void 0:x.name)||((u=i==null?void 0:i[0])==null?void 0:u.team_name)||"[Team Name]":((y=o==null?void 0:o[0])==null?void 0:y.name)||"[Winner Name]"}),t.jsx("div",{style:{position:"absolute",left:`${n.layout_settings.bodyPosition.x}%`,top:`${n.layout_settings.bodyPosition.y}%`,transform:"translate(-50%, -50%)",fontSize:`${n.layout_settings.bodyFontSize}px`,color:n.layout_settings.bodyColor,width:"80%",textAlign:n.layout_settings.bodyTextAlign},children:n.body_text||(l?"for participating in the event":s?"for outstanding team achievement in the event":"for outstanding achievement in the event")}),c.signature&&t.jsx("div",{style:{position:"absolute",left:`${n.layout_settings.signaturePosition.x}%`,top:`${n.layout_settings.signaturePosition.y}%`,transform:"translate(-50%, -50%)",width:`${n.layout_settings.signatureWidth}px`},children:t.jsx("img",{src:c.signature,className:"w-full h-auto",alt:"Signature"})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Title"}),t.jsx("input",{type:"text",value:n.title,onChange:e=>d("title",e.target.value),placeholder:l?"CERTIFICATE OF PARTICIPATION":"CERTIFICATE OF ACHIEVEMENT",className:"mt-1 block w-full rounded-md bg-[#242031] border-gray-700 text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Signature Image"}),t.jsx("input",{type:"file",onChange:e=>_("signature_image",e.target.files[0]),className:"mt-1 block w-full text-gray-300",accept:"image/*"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Body Text"}),t.jsx("textarea",{value:n.body_text,onChange:e=>d("body_text",e.target.value),rows:4,className:"mt-1 block w-full rounded-md bg-[#242031] border-gray-700 text-white",placeholder:l?"for participating in the event":s?"for outstanding team achievement in the event":"for outstanding achievement in the event"})]})]}),!l&&s&&t.jsxs("div",{className:"mt-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"Selected Teams"}),t.jsx("div",{className:"bg-[#242031] rounded-lg p-4",children:(r==null?void 0:r.length)>0?t.jsx("ul",{className:"space-y-3",children:r.map(e=>t.jsxs("li",{className:"text-gray-300",children:[t.jsx("span",{className:"font-medium",children:e.name||e.team_name}),t.jsx("div",{className:"mt-1 ml-4 text-sm text-gray-400",children:e.members?t.jsx("span",{children:e.members.map(a=>a.name).join(", ")}):t.jsxs("span",{children:["(",e.member_count||0," members)"]})})]},e.id||e.team_id))}):t.jsx("p",{className:"text-gray-400",children:"No teams selected"})})]}),!l&&!s&&t.jsxs("div",{className:"mt-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"Selected Winners"}),t.jsx("div",{className:"bg-[#242031] rounded-lg p-4",children:(o==null?void 0:o.length)>0?t.jsx("ul",{className:"space-y-2",children:o.map(e=>t.jsx("li",{className:"text-gray-300",children:e.name},e.id))}):t.jsx("p",{className:"text-gray-400",children:"No winners selected"})})]}),!l&&!s&&t.jsx("input",{type:"hidden",name:"selected_users",value:JSON.stringify(o.map(e=>e.id))}),!l&&s&&t.jsx("input",{type:"hidden",name:"selected_teams",value:JSON.stringify(i.map(e=>e.id||e.team_id))}),t.jsxs("div",{className:"mt-6 flex justify-between",children:[t.jsx("a",{href:route("events.my-events"),className:"px-4 py-2 bg-gray-700 text-gray-300 rounded-md hover:bg-gray-600 transition-colors",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 bg-[#635985] text-white rounded-md hover:bg-[#443C68] transition-colors",children:g?"Creating...":`Create ${l?"Participation":s?"Team Winner":"Winner"} Certificates`})]})]})]})})})]})}const O=Object.freeze(Object.defineProperty({__proto__:null,default:C},Symbol.toStringTag,{value:"Module"}));export{O as _};
