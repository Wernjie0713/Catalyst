import{r as o,j as e}from"./index-D3Bj6weo.js";import{m as re,L as te,S as ne}from"./index.esm-CYkcvaz4.js";import{A as I}from"./AuthenticatedLayout-DgmrdonU.js";import"./TextInput-ClIswWn0.js";import"./TextArea-8YKc5Ae-.js";import{m as u}from"./proxy-CrpZcEeN.js";import{f as H}from"./format-CzgadoOX.js";import"./en-US-DNUEYIb-.js";const O={planning:"bg-indigo-100 text-indigo-800 border border-indigo-200",in_progress:"bg-blue-100 text-blue-800 border border-blue-200",completed:"bg-emerald-100 text-emerald-800 border border-emerald-200",on_hold:"bg-amber-100 text-amber-800 border border-amber-200"},V={low:"bg-slate-100 text-slate-800 border border-slate-200",medium:"bg-blue-100 text-blue-800 border border-blue-200",high:"bg-orange-100 text-orange-800 border border-orange-200",critical:"bg-rose-100 text-rose-800 border border-rose-200"};function ae({auth:j,project:s,available_mentors:y}){var $,D,z,U,W,T,q,E;const[de,w]=o.useState(0),[le,P]=o.useState("planning"),{data:n,setData:i,post:B,processing:N,errors:h,reset:R}=re({progress_description:"",progress_percentage:0,milestones_completed:"",challenges_faced:"",resources_needed:"",accepted_resources:"",supervisor_id:""}),[X,_]=o.useState(!1),[c,p]=o.useState({milestone:"",challenge:"",resource:"",acceptedResource:""}),[m,b]=o.useState("info"),[f,k]=o.useState([]),S=r=>s.status==="on_hold"?"on_hold":r===0?"planning":r===100?"completed":"in_progress";o.useEffect(()=>{console.log("Project progress:",s==null?void 0:s.progress_percentage);const r=(s==null?void 0:s.progress_percentage)??0;w(r),i("progress_percentage",r),P(S(r)),s!=null&&s.unresolvedResources&&k([])},[s]),o.useEffect(()=>{var r;if(((r=s==null?void 0:s.updates)==null?void 0:r.length)>0){console.log("Project updates:",s.updates);const t=s.updates.filter(a=>!a.updatedBy||!a.updatedBy.name);t.length>0&&console.warn("Updates missing user information:",t)}},[s]),o.useEffect(()=>{P(S(n.progress_percentage))},[n.progress_percentage]),o.useEffect(()=>{s.status==="completed"&&m==="add"&&(b("info"),console.log("Project is completed - redirecting from add update tab"))},[m,s.status]);const Y=r=>{const a=r.currentTarget.getBoundingClientRect(),d=r.clientX-a.left,l=Math.round(d/a.width*100),g=Math.min(100,Math.max(0,l));i("progress_percentage",g),w(g)},G=r=>{if(X){const a=r.currentTarget.getBoundingClientRect(),d=r.clientX-a.left,l=Math.round(d/a.width*100),g=Math.min(100,Math.max(0,l));i("progress_percentage",g),w(g)}},C=r=>{if(c[r].trim()){const a={milestone:"milestones_completed",challenge:"challenges_faced",resource:"resources_needed"}[r],d=n[a]?n[a].split(",").filter(Boolean):[];i(a,[...d,c[r].trim()].join(",")),p(l=>({...l,[r]:""}))}},J=(r,t)=>{const d={milestone:"milestones_completed",challenge:"challenges_faced",resource:"resources_needed"}[r],l=n[d]?n[d].split(",").filter(Boolean):[];l.splice(t,1),i(d,l.join(","))},K=r=>{r.preventDefault(),i("accepted_resources",f.join(",")),console.log("Form data being submitted:",{...n,updated_by:j.user.id}),B(route("projects.updates.store",s.id),{...n,updated_by:j.user.id},{onSuccess:()=>{console.log("Update submitted successfully"),R(),window.location.reload()},onError:t=>{console.error("Failed to add project update:",t)}})},x=r=>{try{return H(new Date(r),"MMM d, yyyy")}catch{return"Invalid date"}},M=r=>{if(f.includes(r)){k(f.filter(a=>a!==r));const t=n.accepted_resources?n.accepted_resources.split(",").filter(Boolean):[];i("accepted_resources",t.filter(a=>a!==r).join(","))}else{k([...f,r]);const t=n.accepted_resources?n.accepted_resources.split(",").filter(Boolean):[];i("accepted_resources",[...t,r].join(","))}},Q=r=>{M(r)},v=r=>{const t={milestone:"milestones_completed",challenge:"challenges_faced",resource:"resources_needed"},a={milestone:{item:"bg-white border border-green-200",button:"text-green-600 hover:text-green-800",dot:"bg-green-500"},challenge:{item:"bg-white border border-red-200",button:"text-red-600 hover:text-red-800",dot:"bg-red-500"},resource:{item:"bg-white border border-blue-200",button:"text-blue-600 hover:text-blue-800",dot:"bg-blue-500"}},d=t[r],l=a[r],g=n[d]?n[d].split(",").filter(Boolean):[],se=n.accepted_resources?n.accepted_resources.split(",").filter(Boolean):[];return g.map((L,F)=>e.jsxs(u.li,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},className:`flex items-center justify-between text-sm p-2 rounded ${l.item}`,children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${l.dot}`}),L]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[r==="resource"&&e.jsx("button",{type:"button",onClick:()=>Q(L),className:`p-1 ${se.includes(L)?"text-green-600":"text-gray-400"} hover:text-green-800`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("button",{type:"button",onClick:()=>J(r,F),className:`p-1 ${l.button}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},F))},Z=r=>r<25?"bg-red-500":r<50?"bg-orange-500":r<75?"bg-yellow-500":"bg-green-500",A=s.unresolvedResources||[],ee=r=>{r.preventDefault(),n.supervisor_id&&B(route("projects.supervisor.request-new",s.id),{supervisor_id:n.supervisor_id},{onSuccess:()=>{window.location.reload()},onError:t=>{console.error("Failed to request new supervisor:",t)}})};return s?e.jsxs(I,{user:j.user,header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Project Details"}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${V[s.priority||"medium"]}`,children:[s.priority||"Medium"," Priority"]})]}),children:[e.jsx(te,{title:`Project - ${(s==null?void 0:s.title)||"Details"}`}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-4 flex items-center",children:e.jsxs("button",{type:"button",onClick:()=>window.history.length>1?window.history.back():ne.visit(route("lecturer.dashboard")),className:"bg-white text-center w-48 rounded-2xl h-14 relative text-black text-base sm:text-lg font-semibold border-4 border-white group shadow",children:[e.jsx("div",{className:"bg-green-400 rounded-xl h-12 w-1/4 grid place-items-center absolute left-0 top-0 group-hover:w-full z-10 duration-500 pointer-events-none",children:e.jsxs("svg",{width:"25px",height:"25px",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{fill:"#000000",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64z"}),e.jsx("path",{fill:"#000000",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312L237.248 512z"})]})}),e.jsx("p",{className:"translate-x-4 relative z-20 pointer-events-none group-hover:opacity-0 duration-300",children:"Go Back"})]})}),e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-indigo-50 to-blue-50",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s.title||"Untitled Project"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Started on ",x(s.start_date)," â€¢ Expected to finish by ",x(s.expected_end_date)]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${O[s.status||"planning"]}`,children:(s.status||"planning").replace("_"," ")}),e.jsxs("span",{className:"text-xl font-bold text-indigo-600",children:[s.progress_percentage,"%"]}),s.status==="completed"&&s.actual_end_date&&e.jsxs("span",{className:"text-xs font-medium text-emerald-600",children:["Completed on ",x(s.actual_end_date)]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:`${Z(s.progress_percentage)} h-2.5 rounded-full`,style:{width:`${s.progress_percentage}%`}})})})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex -mb-px",children:[e.jsx("button",{onClick:()=>b("info"),className:`py-3 px-6 text-sm font-medium ${m==="info"?"border-b-2 border-indigo-500 text-indigo-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Project Info"}),e.jsx("button",{onClick:()=>b("updates"),className:`py-3 px-6 text-sm font-medium ${m==="updates"?"border-b-2 border-indigo-500 text-indigo-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Updates & Timeline"}),s.status!=="completed"?e.jsx("button",{onClick:()=>b("add"),className:`py-3 px-6 text-sm font-medium ${m==="add"?"border-b-2 border-indigo-500 text-indigo-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Add Update"}):e.jsxs("div",{className:"py-3 px-6 text-sm font-medium text-gray-400 flex items-center cursor-not-allowed",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Project Completed"]})]})}),e.jsxs("div",{className:"p-6",children:[m==="info"&&e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4 border-b pb-2",children:"Project Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Title:"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.title||"Untitled"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Type:"}),e.jsx("span",{className:"font-medium text-gray-900 capitalize",children:s.type||"Individual"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${O[s.status||"planning"]}`,children:(s.status||"planning").replace("_"," ")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Priority:"}),e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${V[s.priority||"medium"]}`,children:s.priority||"medium"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Start Date:"}),e.jsx("span",{className:"font-medium text-gray-900",children:x(s.start_date)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Expected End:"}),e.jsx("span",{className:"font-medium text-gray-900",children:x(s.expected_end_date)})]}),s.actual_end_date&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Completed On:"}),e.jsx("span",{className:"font-medium text-emerald-600",children:x(s.actual_end_date)})]})]}),s.type==="individual"&&s.student&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Student"}),e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-green-50 rounded-lg border border-green-100",children:[e.jsx("div",{className:"w-8 h-8 bg-green-200 rounded-full flex items-center justify-center text-green-700 font-medium",children:((D=($=s.student.user)==null?void 0:$.name)==null?void 0:D.charAt(0))||"?"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[((z=s.student.user)==null?void 0:z.name)||"Unknown",s.student.matric_no&&e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",s.student.matric_no,")"]})]}),s.student.user&&e.jsx("a",{href:route("profile.view",s.student.user.id),className:"ml-auto",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500 hover:text-green-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),s.type==="team"&&s.team&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Team Members"}),e.jsxs("div",{className:"bg-indigo-50 p-3 rounded-lg border border-indigo-100",children:[e.jsxs("div",{className:"text-xs text-indigo-700 mb-2",children:[s.team.name," ",e.jsxs("span",{className:"bg-indigo-200 text-indigo-800 px-1.5 py-0.5 rounded text-xs ml-1",children:[((U=s.team.members)==null?void 0:U.length)||0," members"]})]}),e.jsxs("div",{className:"space-y-2 mt-3",children:[(W=s.team.members)==null?void 0:W.map(r=>{var t,a,d,l;return e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-white rounded-md shadow-sm",children:[e.jsx("div",{className:"w-7 h-7 bg-indigo-200 rounded-full flex items-center justify-center text-indigo-700 font-medium text-xs",children:((a=(t=r.user)==null?void 0:t.name)==null?void 0:a.charAt(0))||"?"}),e.jsx("span",{className:"text-sm text-gray-700",children:(d=r.user)==null?void 0:d.name}),e.jsx("a",{href:route("profile.view",(l=r.user)==null?void 0:l.id),className:"ml-auto",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-indigo-500 hover:text-indigo-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]},r.id)}),(!s.team.members||s.team.members.length===0)&&e.jsx("p",{className:"text-xs text-indigo-500 italic py-2 px-3 bg-white rounded",children:"No team members found"})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-md",children:s.description||"No description provided."})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-5 shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4 border-b pb-2",children:"Project Details"}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Progress Overview"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Current Progress"}),e.jsxs("span",{className:"text-sm font-medium text-indigo-600",children:[s.progress_percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"h-2.5 rounded-full",style:{width:`${s.progress_percentage}%`,background:`linear-gradient(90deg, ${s.progress_percentage<30?"#818cf8":s.progress_percentage<70?"#60a5fa":"#34d399"}, ${s.progress_percentage<30?"#6366f1":s.progress_percentage<70?"#3b82f6":"#10b981"})`}})}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:s.status==="completed"?"Project completed!":s.status==="planning"?"Project in planning phase.":s.status==="on_hold"?"Project currently on hold.":`${s.progress_percentage}% of project tasks completed.`})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Supervisor"}),s.supervisor?e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-blue-50 rounded-lg border border-blue-100",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-200 rounded-full flex items-center justify-center text-blue-700 font-medium",children:s.supervisor.name.charAt(0)}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:s.supervisor.name}),s.supervisor_request_status==="pending"&&e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full bg-yellow-100 text-yellow-800 text-xs font-medium",children:"Pending Approval"}),s.supervisor_request_status==="accepted"&&e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full bg-green-100 text-green-800 text-xs font-medium",children:"Approved"}),e.jsx("a",{href:route("profile.view",s.supervisor.id),className:"ml-auto",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500 hover:text-blue-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}):e.jsx(e.Fragment,{children:s.supervisor_request_status==="rejected"&&j.user.id===((q=(T=s.student)==null?void 0:T.user)==null?void 0:q.id)?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("p",{className:"text-sm text-red-800 font-medium",children:"Supervisor Request Rejected"}),e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Your previous supervisor request was rejected. Please select a new supervisor from your mentors."})]}),y&&y.length>0?e.jsxs("form",{onSubmit:ee,className:"flex items-center gap-2",children:[e.jsxs("select",{value:n.supervisor_id,onChange:r=>i("supervisor_id",r.target.value),className:"flex-1 border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0,children:[e.jsx("option",{value:"",children:"Select a new supervisor from your mentors"}),y.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}),e.jsx("button",{type:"submit",disabled:N||!n.supervisor_id,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:N?"Requesting...":"Request Supervisor"}),h.supervisor_id&&e.jsx("span",{className:"text-red-500 text-xs",children:h.supervisor_id})]}):e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"No mentors available."})," You need mentors to request a new supervisor. Please visit the"," ",e.jsx("a",{href:route("friends.list",{tab:"mentors"}),className:"text-blue-600 hover:text-blue-800 underline",children:"Find Mentors"})," ","page to establish mentor relationships first."]})})]}):e.jsx("p",{className:"text-gray-500 italic",children:"No supervisor assigned."})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Project Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-indigo-50 p-3 rounded-lg border border-indigo-100",children:[e.jsx("div",{className:"text-xs text-indigo-700 mb-1",children:"Total Updates"}),e.jsx("div",{className:"text-xl font-bold text-indigo-800",children:((E=s.updates)==null?void 0:E.length)||0})]}),s.status==="completed"?e.jsxs("div",{className:"bg-emerald-50 p-3 rounded-lg border border-emerald-100",children:[e.jsx("div",{className:"text-xs text-emerald-700 mb-1",children:"Completed On"}),e.jsx("div",{className:"text-xl font-bold text-emerald-800",children:x(s.actual_end_date)})]}):e.jsxs("div",{className:"bg-emerald-50 p-3 rounded-lg border border-emerald-100",children:[e.jsx("div",{className:"text-xs text-emerald-700 mb-1",children:"Days Remaining"}),e.jsx("div",{className:"text-xl font-bold text-emerald-800",children:s.expected_end_date?Math.max(0,Math.ceil((new Date(s.expected_end_date)-new Date)/(1e3*60*60*24))):"N/A"})]})]})]})]})]})]}),m==="updates"&&e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Project Timeline"}),s.updates&&s.updates.length>0?e.jsx("div",{className:"relative border-l-2 border-indigo-200 ml-3 pb-4",children:s.updates.map((r,t)=>{var a;return e.jsxs(u.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.3,delay:t*.1},className:"mb-6 ml-6",children:[e.jsx("div",{className:"absolute w-4 h-4 bg-indigo-500 rounded-full mt-1.5 -left-2 border border-white"}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:H(new Date(r.created_at),"MMM d, yyyy")}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-blue-600 mr-2"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["Progress Update: ",r.progress_percentage,"%"]})]})]}),e.jsxs("span",{className:"bg-indigo-100 text-indigo-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:["By ",r.user_name||((a=r.updatedBy)==null?void 0:a.name)||"Unknown"]})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:r.progress_description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:[r.milestones_completed&&e.jsxs("div",{className:"bg-green-50 p-2 rounded border border-green-100",children:[e.jsx("h5",{className:"text-xs font-medium text-green-800 mb-1",children:"Milestones Completed"}),e.jsx("ul",{className:"text-xs text-gray-600 pl-2",children:r.milestones_completed.split(",").filter(Boolean).map((d,l)=>e.jsxs("li",{className:"flex items-center mb-1",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),d]},l))})]}),r.challenges_faced&&e.jsxs("div",{className:"bg-red-50 p-2 rounded border border-red-100",children:[e.jsx("h5",{className:"text-xs font-medium text-red-800 mb-1",children:"Challenges Faced"}),e.jsx("ul",{className:"text-xs text-gray-600 pl-2",children:r.challenges_faced.split(",").filter(Boolean).map((d,l)=>e.jsxs("li",{className:"flex items-center mb-1",children:[e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full mr-2"}),d]},l))})]}),r.resources_needed&&e.jsxs("div",{className:"bg-blue-50 p-2 rounded border border-blue-100",children:[e.jsx("h5",{className:"text-xs font-medium text-blue-800 mb-1",children:"Resources Needed"}),e.jsx("ul",{className:"text-xs text-gray-600 pl-2",children:r.resources_needed.split(",").filter(Boolean).map((d,l)=>e.jsxs("li",{className:"flex items-center mb-1",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),d]},l))})]}),r.accepted_resources&&e.jsxs("div",{className:"bg-emerald-50 p-2 rounded border border-emerald-100",children:[e.jsx("h5",{className:"text-xs font-medium text-emerald-800 mb-1",children:"Accepted Resources"}),e.jsx("ul",{className:"text-xs text-gray-600 pl-2",children:r.accepted_resources.split(",").filter(Boolean).map((d,l)=>e.jsxs("li",{className:"flex items-center mb-1",children:[e.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full mr-2"}),d]},l))})]})]})]})]},r.id)})}):e.jsxs("div",{className:"text-center py-10 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 9l-7 7-7-7"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No updates yet"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Add your first project update to begin tracking progress."}),e.jsx("div",{className:"mt-6",children:s.status!=="completed"?e.jsx("button",{type:"button",onClick:()=>b("add"),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:"Add Update"}):e.jsx("div",{className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-500 bg-gray-100",children:"Project Completed"})})]})]}),m==="add"&&e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:s.status==="completed"?e.jsxs("div",{className:"bg-amber-50 p-8 rounded-lg border border-amber-200 text-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-amber-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),e.jsx("h3",{className:"text-lg font-medium text-amber-800 mb-2",children:"Project Already Completed"}),e.jsxs("p",{className:"text-amber-700 mb-4",children:["This project has been marked as completed on ",x(s.actual_end_date),". No further updates can be added to completed projects."]}),e.jsx("button",{type:"button",onClick:()=>b("updates"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-amber-600 hover:bg-amber-700",children:"View Project Timeline"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add Project Update"}),e.jsxs("form",{onSubmit:K,className:"space-y-6 bg-white rounded-lg p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Progress Description"}),e.jsx("textarea",{value:n.progress_description,onChange:r=>i("progress_description",r.target.value),className:"w-full px-3 py-2 text-gray-700 border rounded-lg focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500",rows:"3",placeholder:"Describe the current progress, key achievements, or challenges...",required:!0}),h.progress_description&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:h.progress_description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Progress Percentage"}),e.jsxs("div",{className:"mt-2 mb-10 relative",children:[e.jsx("div",{className:"h-5 w-full bg-gray-200 rounded-lg cursor-pointer relative",onClick:Y,onMouseMove:G,onMouseDown:()=>_(!0),onMouseUp:()=>_(!1),onMouseLeave:()=>_(!1),children:e.jsx(u.div,{initial:{width:"0%"},animate:{width:`${n.progress_percentage}%`},transition:{duration:.3},className:"h-full rounded-lg relative",style:{background:`linear-gradient(90deg, 
                                                                            ${n.progress_percentage<30?"#818cf8":n.progress_percentage<70?"#60a5fa":"#34d399"}, 
                                                                            ${n.progress_percentage<30?"#6366f1":n.progress_percentage<70?"#3b82f6":"#10b981"})`},children:e.jsx("div",{className:"absolute -right-3.5 -top-2 w-9 h-9 bg-white rounded-full cursor-grab shadow-md flex items-center justify-center border-2 border-indigo-500 select-none",children:e.jsxs("span",{className:"text-xs font-semibold text-indigo-700",children:[n.progress_percentage,"%"]})})})}),e.jsxs("div",{className:"absolute mt-2 w-full flex justify-between px-1 text-xs text-gray-500",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{children:"25%"}),e.jsx("span",{children:"50%"}),e.jsx("span",{children:"75%"}),e.jsx("span",{children:"100%"})]})]}),h.progress_percentage&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:h.progress_percentage})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"bg-green-50 p-3 sm:p-4 rounded-lg border border-green-100",children:[e.jsx("label",{className:"block text-sm font-medium text-green-800 mb-2",children:"Milestones Completed"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",value:c.milestone,onChange:r=>p(t=>({...t,milestone:r.target.value})),className:"flex-1 rounded-l-md border-gray-300 focus:border-green-500 focus:ring-green-500 text-sm",placeholder:"Add a milestone"}),e.jsxs("button",{type:"button",onClick:()=>C("milestone"),className:"inline-flex items-center px-2 sm:px-3 py-2 border border-l-0 border-gray-300 rounded-r-md bg-green-100 text-green-700 hover:bg-green-200 text-sm",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-0 sm:mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{className:"hidden sm:inline",children:"Add"})]})]}),e.jsx("ul",{className:"mt-2 sm:mt-3 space-y-1 max-h-28 sm:max-h-32 overflow-y-auto",children:v("milestone").length>0?v("milestone"):e.jsx("li",{className:"text-sm text-gray-500 italic py-2 px-3 bg-white rounded",children:"No milestones added yet"})})]}),e.jsxs("div",{className:"bg-red-50 p-3 sm:p-4 rounded-lg border border-red-100",children:[e.jsx("label",{className:"block text-sm font-medium text-red-800 mb-2",children:"Challenges Faced"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",value:c.challenge,onChange:r=>p(t=>({...t,challenge:r.target.value})),className:"flex-1 rounded-l-md border-gray-300 focus:border-red-500 focus:ring-red-500 text-sm",placeholder:"Add a challenge"}),e.jsxs("button",{type:"button",onClick:()=>C("challenge"),className:"inline-flex items-center px-2 sm:px-3 py-2 border border-l-0 border-gray-300 rounded-r-md bg-red-100 text-red-700 hover:bg-red-200 text-sm",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-0 sm:mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{className:"hidden sm:inline",children:"Add"})]})]}),e.jsx("ul",{className:"mt-2 sm:mt-3 space-y-1 max-h-28 sm:max-h-32 overflow-y-auto",children:v("challenge").length>0?v("challenge"):e.jsx("li",{className:"text-sm text-gray-500 italic py-2 px-3 bg-white rounded",children:"No challenges added yet"})})]})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 p-3 sm:p-4 rounded-lg border border-blue-100",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:"Resources Needed"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",value:c.resource,onChange:r=>p(t=>({...t,resource:r.target.value})),className:"flex-1 rounded-l-md border-gray-300 focus:border-blue-500 focus:ring-blue-500 text-sm",placeholder:"Add a resource"}),e.jsxs("button",{type:"button",onClick:()=>C("resource"),className:"inline-flex items-center px-2 sm:px-3 py-2 border border-l-0 border-gray-300 rounded-r-md bg-blue-100 text-blue-700 hover:bg-blue-200 text-sm",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-0 sm:mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{className:"hidden sm:inline",children:"Add"})]})]}),e.jsx("ul",{className:"mt-2 sm:mt-3 space-y-1 max-h-28 sm:max-h-32 overflow-y-auto",children:v("resource").length>0?v("resource"):e.jsx("li",{className:"text-sm text-gray-500 italic py-2 px-3 bg-white rounded",children:"No resources added yet"})}),A.length>0&&e.jsxs("div",{className:"mt-2 sm:mt-3",children:[e.jsx("h4",{className:"text-xs font-medium text-blue-800 mb-1",children:"Unresolved Resources"}),e.jsx("ul",{className:"space-y-1 text-xs",children:A.map((r,t)=>e.jsxs("li",{className:"text-gray-700 flex items-center",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-400 mr-1.5"}),r]},t))})]})]}),e.jsxs("div",{className:"bg-green-50 p-3 sm:p-4 rounded-lg border border-green-100",children:[e.jsx("label",{className:"block text-sm font-medium text-green-800 mb-2",children:"Accepted Resources"}),e.jsxs("div",{className:"flex mb-2 sm:mb-3",children:[e.jsxs("select",{value:c.acceptedResource||"",onChange:r=>p(t=>({...t,acceptedResource:r.target.value})),className:"flex-1 rounded-l-md border-gray-300 focus:border-green-500 focus:ring-green-500 text-sm",children:[e.jsx("option",{value:"",children:"Select a resource..."}),e.jsx("option",{value:"Mentorship Access",children:"Mentorship"}),e.jsx("option",{value:"Funding Opportunities",children:"Funding"}),e.jsx("option",{value:"Tools for Startup",children:"Tools for Startup"}),e.jsx("option",{value:"Networking",children:"Networking"}),e.jsx("option",{value:"Educational Resources",children:"Educational"}),e.jsx("option",{value:"Legal Assistance",children:"Legal Assistance"}),e.jsx("option",{value:"Market Research",children:"Market Research"}),e.jsx("option",{value:"Prototyping Resources",children:"Prototyping"})]}),e.jsxs("button",{type:"button",onClick:()=>{c.acceptedResource&&c.acceptedResource.trim()&&(M(c.acceptedResource),p(r=>({...r,acceptedResource:""})))},className:"inline-flex items-center px-2 sm:px-3 py-2 border border-l-0 border-gray-300 rounded-r-md bg-green-100 text-green-700 hover:bg-green-200 text-sm",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-0 sm:mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{className:"hidden sm:inline",children:"Add"})]})]}),e.jsx("ul",{className:"space-y-1 max-h-28 sm:max-h-32 overflow-y-auto",children:f.length>0?f.map((r,t)=>e.jsxs("li",{className:"flex items-center justify-between text-sm p-2 rounded bg-white border border-green-200",children:[e.jsxs("span",{className:"flex items-center text-xs sm:text-sm truncate pr-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full mr-1 sm:mr-2 flex-shrink-0 bg-green-500"}),r]}),e.jsx("button",{type:"button",onClick:()=>M(r),className:"p-1 text-green-600 hover:text-green-800 flex-shrink-0",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t)):e.jsx("li",{className:"text-sm text-gray-500 italic py-2 px-3 bg-white rounded",children:"No accepted resources added yet"})})]})]})]})]}),e.jsxs("div",{className:"flex justify-end pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>R(),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 mr-3",disabled:N,children:"Reset"}),e.jsx("button",{type:"submit",disabled:N,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:N?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):"Submit Update"})]})]})]})})]})]})]})})]}):e.jsx(I,{user:j.user,children:e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6",children:e.jsx("p",{className:"text-gray-500 text-center",children:"Project not found."})})})})})}const pe=Object.freeze(Object.defineProperty({__proto__:null,default:ae},Symbol.toStringTag,{value:"Module"}));export{pe as _};
